<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="utf-8">
        <title> OpenID Connect</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="shortcut icon" type="image/x-icon" href="/curriculum/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/an-old-hope.min.css">
        <link rel="stylesheet" href="/curriculum/style.css"/>
        <script src="/curriculum/js/highlight.min.js"></script>
        <script src="/curriculum/js/bash.min.js"></script>
        <script src="/curriculum/js/java.min.js"></script>
        <script src="/curriculum/js/javascript.min.js"></script>
        <script src="/curriculum/js/sql.min.js"></script>
    </head>
    <body>
        <button 
            id="navigation-toggle"
            aria-expanded="false"
            aria-haspopup="true"
            onclick="toggleNav()"
            onkeydown="event => {event.keyCode === 13 ? toggleNav() : null}"
            tabindex="1">Table of contents</button>
        <nav id="navigation"><ul><details><summary>Bootcamp</summary><ul><details><summary>Unit 1 Object Oriented Programming</summary><ul><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.0-UML_Modelling.html">0.1.0 UML Modelling</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.1-JavaScript_Objects_And_Functions.html">0.1.1 JavaScript Objects And Functions</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.2-Test_Driven_Development.html">0.1.2 Test Driven Development</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.3-Objects_in_an_Airport_Domain.html">0.1.3 Objects in an Airport Domain</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.4-Static_functions_and_properties.html">0.1.4 Static functions and properties</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.5-Inheritance.html">0.1.5 Inheritance</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.7-OOP_Challenge.html">0.1.7 OOP Challenge</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.8-End_of_Unit_Quiz_OOP.html">0.1.8 End of Unit Quiz OOP</a></li></ul></details><details><summary>Unit 2 Asynchronous JavaScript</summary><ul><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.1-Asynchronous_JavaScript.html">0.2.1 Asynchronous JavaScript</a></li><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.2-Promises.html">0.2.2 Promises</a></li><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.3-Asynchronous_Airport_Data_Load.html">0.2.3 Asynchronous Airport Data Load</a></li><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.4-End_of_Unit_Quiz_Async.html">0.2.4 End of Unit Quiz Async</a></li></ul></details><details><summary>Unit 3 Relational Databases</summary><ul><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.10-Sequelize_part_2.html">0.3.10 Sequelize part 2</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.11-End_of_Unit_Quiz_Databases.html">0.3.11 End of Unit Quiz Databases</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.2-Introduction_to_Databases.html">0.3.2 Introduction to Databases</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.3-Basic_SQL_Commands.html">0.3.3 Basic SQL Commands</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.4-SQL_Joins.html">0.3.4 SQL Joins</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.5-Database_access_using_Node.html">0.3.5 Database access using Node</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.6-Populating_databases_from_JSON.html">0.3.6 Populating databases from JSON</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.7-Object_Relational_Mapping_part_1.html">0.3.7 Object Relational Mapping part 1</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.8-Object_Relational_Mapping_part_2.html">0.3.8 Object Relational Mapping part 2</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.9-Sequelize_part_1.html">0.3.9 Sequelize part 1</a></li></ul></details><details><summary>Unit 4 RESTful Servers</summary><ul><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.1-Web_Servers.html">0.4.1 Web Servers</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.2-Application_Servers.html">0.4.2 Application Servers</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.3-Postman.html">0.4.3 Postman</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.4-Route_Parameters.html">0.4.4 Route Parameters</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.5-CRUD_operations.html">0.4.5 CRUD operations</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.6-Server_side_Validation.html">0.4.6 Server side Validation</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.7-End_of_Unit_Quiz_RESTful.html">0.4.7 End of Unit Quiz RESTful</a></li></ul></details><details><summary>Unit 5 Human Computer Interaction</summary><ul><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.1-Human_Computer_Interaction.html">0.5.1 Human Computer Interaction</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.2-Server_Side_Rendering.html">0.5.2 Server Side Rendering</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.3-The_Document_Object_Model.html">0.5.3 The Document Object Model</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.4-HTML_forms_and_lists.html">0.5.4 HTML forms and lists</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.5-End_of_Unit_Quiz_HCI.html">0.5.5 End of Unit Quiz HCI</a></li></ul></details><details><summary>Unit 6 End Of Bootcamp Group Project</summary><ul><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.1-Introduction.html">0.6.1 Introduction</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.2-Requirements.html">0.6.2 Requirements</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.3-Agile_Development.html">0.6.3 Agile Development</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.4-Design.html">0.6.4 Design</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.5-GitHub_Projects.html">0.6.5 GitHub Projects</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.6-Branching_and_Pull_Requests.html">0.6.6 Branching and Pull Requests</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.7-Deployment_with_Heroku.html">0.6.7 Deployment with Heroku</a></li></ul></details></ul></details><details><summary>Module 1</summary><ul><details><summary>Unit 1 Agile user requirements</summary><ul><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.1-Introduction_to_Agile.html">1.1.1 Introduction to Agile</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.2-Personas.html">1.1.2 Personas</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.3-User_Stories.html">1.1.3 User Stories</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.4-Requirements.html">1.1.4 Requirements</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.5-Next_Steps.html">1.1.5 Next Steps</a></li></ul></details><details><summary>Unit 2 Designing UI</summary><ul><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.1-Usability_heuristics.html">1.2.1 Usability heuristics</a></li><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.2-Composition_and_components_in_design.html">1.2.2 Composition and components in design</a></li><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.3-Prototyping_UI.html">1.2.3 Prototyping UI</a></li><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.4-Next_Steps.html">1.2.4 Next Steps</a></li></ul></details><details><summary>Unit 3 Building UI with React</summary><ul><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.1-Getting_started_with_React.html">1.3.1 Getting started with React</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.2-React_methods_and_computed_properties.html">1.3.2 React methods and computed properties</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.7-Integrating_Redux_for_global_state_management.html">1.3.7 Integrating Redux for global state management</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 3 Building UI with Vue.js</summary><ul><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.1-Getting_started_with_the_Vue_CDN.html">1.3.1 Getting started with the Vue CDN</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.2-Vue_methods_and_computed_properties.html">1.3.2 Vue methods and computed properties</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.7-Integrating_Vuex_for_global_state_management.html">1.3.7 Integrating Vuex for global state management</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 4 Accessibility</summary><ul><li><a href="/curriculum/Module-1/Unit-4-Accessibility/1.4.1-Inclusive_design.html">1.4.1 Inclusive design</a></li><li><a href="/curriculum/Module-1/Unit-4-Accessibility/1.4.2-Accessibility.html">1.4.2 Accessibility</a></li><li><a href="/curriculum/Module-1/Unit-4-Accessibility/1.4.3-Next_Steps.html">1.4.3 Next Steps</a></li></ul></details><details><summary>Unit 5 End to end testing</summary><ul><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.1-End_to_end_testing.html">1.5.1 End to end testing</a></li><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.2-End_to_end_testing_with_Cypress.html">1.5.2 End to end testing with Cypress</a></li><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.3-Adding_more_test_coverage.html">1.5.3 Adding more test coverage</a></li><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.4-Test_cases_and_equivalence_testing.html">1.5.4 Test cases and equivalence testing</a></li></ul></details></ul></details><details><summary>Module 2</summary><ul><details><summary>Unit 1 Securing APIs with Basic Auth</summary><ul><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.1-RESTful_APIs_and_Frameworks.html">2.1.1 RESTful APIs and Frameworks</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.2-MOVE_TO_BOOTCAMP.html">2.1.2 MOVE TO BOOTCAMP</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.2-Password_Hashing.html">2.1.2 Password Hashing</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.3-Implementing_Basic_Auth.html">2.1.3 Implementing Basic Auth</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.4-Limitations_of_Basic_Auth.html">2.1.4 Limitations of Basic Auth</a></li></ul></details><details><summary>Unit 2 Securing APIs with OAuth and OpenID Connect</summary><ul><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.1-Introduction_to_OAuth.html">2.2.1 Introduction to OAuth</a></li><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.2-Securing_APIs_with_OAuth.html">2.2.2 Securing APIs with OAuth</a></li><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.3-OpenID_Connect.html">2.2.3 OpenID Connect</a></li><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.4-Module_2_assessment.html">2.2.4 Module 2 assessment</a></li></ul></details></ul></details><details><summary>Module 3</summary><ul><details><summary>Unit 1 The SDLC</summary><ul><li><a href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.1-The_Software_Development_Life_Cycle.html">3.1.1 The Software Development Life Cycle</a></li><li><a href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.2-The_roles_and_responsibilities_in_the_SDLC_with_communication.html">3.1.2 The roles and responsibilities in the SDLC with communication</a></li><li><a href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.3-Communication_in_your_teams.html">3.1.3 Communication in your teams</a></li></ul></details><details><summary>Unit 2 The 7 Princibles of Testing</summary><ul><li><a href="/curriculum/Module-3/Unit-2-The-7-Princibles-of-Testing/3.2.1-The_7_Princibles_of_Testing.html">3.2.1 The 7 Princibles of Testing</a></li></ul></details><details><summary>Unit 3 Deployment and Maintenance</summary><ul><li><a href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.1-Introduction_to_Unix.html">3.3.1 Introduction to Unix</a></li><li><a href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.2-Introduction_to_containerisation.html">3.3.2 Introduction to containerisation</a></li><li><a href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.3-Introduction_to_Cloud_Computing.html">3.3.3 Introduction to Cloud Computing</a></li><li><a href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.4-Monitoring_and_Maintenance.html">3.3.4 Monitoring and Maintenance</a></li></ul></details></ul></details><details><summary>Module 4</summary><ul><details><summary>Unit 1 Open Web Application Security Project</summary><ul><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.1-Introduction_to_the_OWASP_Top_Ten.html">4.1.1 Introduction to the OWASP Top Ten</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.2-Injection_Attacks.html">4.1.2 Injection Attacks</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.3-Broken_Authentication.html">4.1.3 Broken Authentication</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.3-Exposing_Sensitive_Data.html">4.1.3 Exposing Sensitive Data</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.4-Monitoring_for_attacks.html">4.1.4 Monitoring for attacks</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.5-The_role_of_a_Penetration_Tester.html">4.1.5 The role of a Penetration Tester</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.6-Next_Steps.html">4.1.6 Next Steps</a></li></ul></details></ul></details></ul></nav>
        <h1>OpenID Connect</h1>
<h2>Learning Objectives</h2>
<ul>
<li>Understand the difference between OAuth and OpenID Connect</li>
<li>Know that Auth0 can store usernames and passwords on your behalf</li>
<li>Set up Auth0's universal login</li>
</ul>
<h2>Lesson</h2>
<p>OAuth deals specifically with <em>authorization</em>. OpenID Connect (OIDC) is a protocol which is built on top of OAuth 2.0 and focusses on user <em>authentication</em>. It is widely used to enable user logins on websites and mobile apps.</p>
<p><figure><img src="https://user-images.githubusercontent.com/1316724/131079947-85492473-ee7f-4826-b327-c6d84640dc8c.png" alt="Open ID Connect flow shown in a UML sequence diagram"><figcaption></figcaption></figure></p>
<p>OIDC allows apps to verify the identity of the end user and obtain basic profile information such as name and email address. This profile information is held within another JWT known as the ID token.</p>
<blockquote>
<p>Use https://jwt.io to find out the name and email hidden in this JWT ID token <code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkZyZWQgRmxpbnRzdG9uZSIsImVtYWlsIjoiZnJlZC5mbGludHN0b25lQHdoaXRlaGF0Lm9yZy51ayIsImlhdCI6MTUxNjIzOTAyMn0.DlHfHG2qZXpWszZv-X8LwoQkZUlqVgaXoRmnHXE2y_I</code></p>
</blockquote>
<h2>Implementing authentication using Auth0</h2>
<p>In this lesson we will store our usernames and passwords in Auth0. This is not strictly necessary as Auth0 supports connecting to other datasources to vaidate credentials, however, doing so simplifies our implementation.</p>
<h3>Adding usernames &amp; passwords to Auth0</h3>
<p>Navigate to <code>User Management-&gt;Users</code> and choose to <code>Create User</code>. Enter the credentials and click <code>Create</code>. Repeat for any other users you have. Note that Auth0 will take care of hashing the passwords for you.</p>
<h3>Creating a login page</h3>
<p>Auth0's login page can be integrated into many different types of apps including mobile, single page apps and regular web apps. For this lesson we will choose to add login/logout and profile functionality to a &quot;regular web app&quot;.</p>
<p><figure><img src="https://user-images.githubusercontent.com/4499581/105991041-39273400-609b-11eb-9078-6975f7a5e2bc.png" alt="Regular Web App Option on Auth0"><figcaption></figcaption></figure></p>
<ol>
<li><p>Using the Auth0 Dashboard, navigate to <code>Applications</code> and choose to <code>Create Application</code>. Choose <code>Regular Web Applications</code>.</p></li>
<li><p>Follow the wizard and select</p>
<ul>
<li>Node.js(Express)</li>
<li>EXPLORE SAMPLE APP</li>
<li>SAVE AND DOWNLOAD APP<br>
This will create a new application called <code>My App</code> in the Auth0 Dashboard and will download the code for a sample web app as a zip file. You can read more about how the sample web app works <a href="https://auth0.com/docs/quickstart/webapp/express">here</a>.</li>
</ul></li>
<li><p>Navigate to the Auth0 Dashboard <code>Applications-&gt;APIs</code> and authorise <code>My App</code> to have access to the Messages API.</p></li>
<li><p>Extract the zip and import the code into VSCode</p></li>
<li><p>Edit the <code>.env</code> file to include your app specific settings (these will be visible in your Auth0 Dashboard under <code>Applications-&gt;My App</code>). You may also need to change the PORT if it clashes with the port your API is running on.</p></li>
<li><p>Add <code>.env</code> to your <code>.gitignore</code> to avoid details of your Auth0 account being saved to git.</p></li>
<li><p>Follow the instructions to start the sample application, then navigate to <code>http://localhost:</code>YOUR_API_PORT_NUMBER. The following web page should be displayed.</p>
<p><img width="956" alt="generated sample app home page" src="https://user-images.githubusercontent.com/1316724/130907482-76adf6aa-db76-4dda-a722-e20f18ab3ec5.PNG"></p></li>
<li><p>Clicking &quot;Login&quot; will display the <a href="https://auth0.com/docs/universal-login">Auth0 Universal Login</a> page</p>
<p><img width="246" alt="Auth0 universal login" src="https://user-images.githubusercontent.com/1316724/130907646-2c17c434-0a17-42c2-957e-e11c9360fd7b.PNG"></p></li>
<li><p>Enter the username and password you added to Auth0 and you should now be successfully logged in</p>
<p><img width="952" alt="loginCompleteOIDC" src="https://user-images.githubusercontent.com/1316724/130907911-d54c17a1-b9e7-4cb2-9691-10212bac5e35.PNG"></p></li>
<li><p>Select &quot;Profile&quot; to view your user profile information. This information is held in a JWT ID token called <code>req.oidc.user</code>.</p>
<p><img width="658" alt="Profile information" src="https://user-images.githubusercontent.com/1316724/130910094-1f29a94c-05e5-4ffb-8247-77445d5fea54.PNG"></p></li>
</ol>
<p>Well done, you have successfully authenticated a user using OIDC!</p>
<h2>Assignment</h2>
<p>In the previous lesson you used OAuth to secure your Messages API. In this lesson you used OIDC to implement user authentication and add login/logout functionality to a web app. Now we need to connect the two parts!</p>
<p>In this assignment you are required to extend your web app to call the Messages API only if the user is logged in.</p>
<p>You will need to modify the <code>server.js</code> file config section to be as follows.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">authorizationParams</span>: {
    <span class="hljs-attr">response_type</span>: <span class="hljs-string">&#x27;code&#x27;</span>,
    <span class="hljs-attr">audience</span>: <span class="hljs-string">&#x27;messagesAPI&#x27;</span>,
  },
  <span class="hljs-attr">authRequired</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">auth0Logout</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">clientSecret</span>: process.env.SECRET, 
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://localhost:&#x27;</span>+process.env.PORT,
  <span class="hljs-attr">clientID</span>: process.env.CLIENT_ID,
  <span class="hljs-attr">issuerBaseURL</span>: process.env.ISSUER_BASE_URL
};
</code></pre>
<p>You can then use the following code to call the Messages API.</p>
<pre><code class="language-javascript">    <span class="hljs-comment">// retrieve the access token</span>
    <span class="hljs-keyword">const</span> { token_type, access_token } = req.oidc.accessToken; 

    <span class="hljs-comment">// call the API with the access token</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">`http://localhost:8080/messages`</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,
        <span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">`<span class="hljs-subst">${token_type}</span> <span class="hljs-subst">${access_token}</span>`</span>
      }
    });
    <span class="hljs-keyword">const</span> message = <span class="hljs-keyword">await</span> response.json();
    <span class="hljs-built_in">console</span>.log(message)

  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">console</span>.error(error);
  }
</code></pre>
<p>One the integration is complete, commit your code to GitHub and notify your coach that this assignment is complete.</p>
<h2>Additional Resources</h2>
<p>The following resources summarise the process of integrating OIDC into a web app and calling an API.</p>
<ul>
<li><p><a href="https://auth0.com/docs/quickstart/webapp/express">Adding user login, logout, and profile to a Node.js Express application</a></p></li>
<li><p><a href="https://github.com/auth0/express-openid-connect/blob/master/EXAMPLES.md#4-obtaining-access-tokens-to-call-external-apis">Obtaining access tokens to call external APIs</a></p></li>
</ul>

        <script src="/curriculum/js/tabbed-code-blocks.js"></script>
        <script>
            function toggleNav() {
                const button = document.getElementById('navigation-toggle')
                const isAriaExp = button.getAttribute('aria-expanded')
                const newAriaExp = (isAriaExp == "false") ? "true" : "false"
                button.setAttribute('aria-expanded', newAriaExp)
                const nav = document.getElementById('navigation')
                nav.style.display = nav.offsetParent ? 'none' : 'block'
            }
        </script>
    </body>
</html>
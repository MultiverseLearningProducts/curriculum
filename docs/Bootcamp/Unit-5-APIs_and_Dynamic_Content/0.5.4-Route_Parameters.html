<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="utf-8">
        <title> Route Parameters</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="shortcut icon" type="image/x-icon" href="/curriculum/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/an-old-hope.min.css">
        <link rel="stylesheet" href="/curriculum/style.css"/>
        <script src="/curriculum/js/highlight.min.js"></script>
        <script src="/curriculum/js/bash.min.js"></script>
        <script src="/curriculum/js/java.min.js"></script>
        <script src="/curriculum/js/javascript.min.js"></script>
        <script src="/curriculum/js/sql.min.js"></script>
    </head>
    <body>
        <button 
            id="navigation-toggle"
            aria-expanded="false"
            aria-haspopup="true"
            onclick="toggleNav()"
            onkeydown="event => {event.keyCode === 13 ? toggleNav() : null}"
            tabindex="1">Table of contents</button>
        <nav id="navigation"><ul><li><a href="/curriculum\Bootcamp/index.html">Bootcamp</a><ul><li><a href="/curriculum\Bootcamp\FAQ.html">FAQ</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming/index.html">Unit 1 Object Oriented Programming</a><ul><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.1-JavaScript_Objects_And_Functions.html">0.1.1 JavaScript Objects And Functions</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.2-Test_Driven_Development.html">0.1.2 Test Driven Development</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.3-Objects_in_an_Airport_Domain.html">0.1.3 Objects in an Airport Domain</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.4-Static_functions_and_properties.html">0.1.4 Static functions and properties</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.5-Inheritance.html">0.1.5 Inheritance</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.6-UML_Modelling.html">0.1.6 UML Modelling</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.7-Unit_1_Challenge.html">0.1.7 Unit 1 Challenge</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript/index.html">Unit 2 Asynchronous JavaScript</a><ul><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.1-Asynchronous_JavaScript.html">0.2.1 Asynchronous JavaScript</a></li><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.2-Asynchronous_Airport_Data_Load.html">0.2.2 Asynchronous Airport Data Load</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases/index.html">Unit 3 Relational Databases</a><ul><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.1-Logical_Data_Model.html">0.3.1 Logical Data Model</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.10-Sequelize_part_2.html">0.3.10 Sequelize part 2</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.2-Implementing_the_Logical_Data_Model.html">0.3.2 Implementing the Logical Data Model</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.3-Basic_SQL_Commands.html">0.3.3 Basic SQL Commands</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.4-SQL_Joins.html">0.3.4 SQL Joins</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.5-Database_access_using_Node.html">0.3.5 Database access using Node</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.6-Populating_databases_from_JSON.html">0.3.6 Populating databases from JSON</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.7-Object_Relational_Mapping_part_1.html">0.3.7 Object Relational Mapping part 1</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.8-Object_Relational_Mapping_part_2.html">0.3.8 Object Relational Mapping part 2</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.9-Sequelize_part_1.html">0.3.9 Sequelize part 1</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS/index.html">Unit 4 Advanced HTML CSS</a><ul><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.1-CSS_Box_Model.html">0.4.1 CSS Box Model</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.1-CSS_Fundamentals.html">0.4.1 CSS Fundamentals</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.1-CSS_Positioning.html">0.4.1 CSS Positioning</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.2-CSS_Flexbox_Layout.html">0.4.2 CSS Flexbox Layout</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.3-CSS_Grid_Layout.html">0.4.3 CSS Grid Layout</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.4-Responsive_CSS_Media_Queries.html">0.4.4 Responsive CSS Media Queries</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.5-Responsive_CSS_Background_Images.html">0.4.5 Responsive CSS Background Images</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.6-Client_side_JavaScript.html">0.4.6 Client side JavaScript</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.6-HTML_Forms.html">0.4.6 HTML Forms</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.8-HTML_DOM_Events.html">0.4.8 HTML DOM Events</a></li><li><a href="/curriculum\Bootcamp\Unit-4-Advanced_HTML_CSS\0.4.8-HTML_Web_Storage_API.html">0.4.8 HTML Web Storage API</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content/index.html">Unit 5 APIs and Dynamic Content</a><ul><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.1-Web_Servers.html">0.5.1 Web Servers</a></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.2-Application_Servers.html">0.5.2 Application Servers</a></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.3-Rendering_Dynamic_Content.html">0.5.3 Rendering Dynamic Content</a></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.4-Route_Parameters.html">0.5.4 Route Parameters</a></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.5-Server_side_Validation.html">0.5.5 Server side Validation</a></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.6-CRUD_operations.html">0.5.6 CRUD operations</a></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.7-Unit_5_Challenge.html">0.5.7 Unit 5 Challenge</a></li><li><a href="/curriculum\Bootcamp\Unit-5-APIs_and_Dynamic_Content\0.5.8-Unit_5_Knowledge_Quiz.html">0.5.8 Unit 5 Knowledge Quiz</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-6-Website_Testing/index.html">Unit 6 Website Testing</a><ul><li><a href="/curriculum\Bootcamp\Unit-6-Website_Testing\0.6.1-Cypress_Testing.html">0.6.1 Cypress Testing</a></li><li><a href="/curriculum\Bootcamp\Unit-6-Website_Testing\0.6.2-Accessibility_Testing.html">0.6.2 Accessibility Testing</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-7-End_Of_Bootcamp_Assessment/index.html">Unit 7 End Of Bootcamp Assessment</a><ul><li><a href="/curriculum\Bootcamp\Unit-7-End_Of_Bootcamp_Assessment\0.7.1-TODO.html">0.7.1 TODO</a></li></ul></li></ul></li><li><a href="/curriculum\Module-2/index.html">Module 2</a><ul><li><a href="/curriculum\Module-2\Unit-1-The_Anatomy_of_the_HTTP_request/index.html">Unit 1 The Anatomy of the HTTP request</a><ul><li><a href="/curriculum\Module-2\Unit-1-The_Anatomy_of_the_HTTP_request\2.1.1-Identifying_the_different_parts_of_HTTP.html">2.1.1 Identifying the different parts of HTTP</a></li><li><a href="/curriculum\Module-2\Unit-1-The_Anatomy_of_the_HTTP_request\2.1.2-Programmatic_HTTP_requests.html">2.1.2 Programmatic HTTP requests</a></li></ul></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST/index.html">Unit 2 What is REST</a><ul><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.1-REST_and_the_openAPI_spec.html">2.2.1 REST and the openAPI spec</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.2-The_OpenAPI_spec.html">2.2.2 The OpenAPI spec</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.3-Build_an_OpenAPI_RESTful_service.html">2.2.3 Build an OpenAPI RESTful service</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.4-Integration_tests.html">2.2.4 Integration tests</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.5-Unit_2_Knowledge_quiz.html">2.2.5 Unit 2 Knowledge quiz</a></li></ul></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography/index.html">Unit 3 Cryptography</a><ul><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.1-Hashing_Functions.html">2.3.1 Hashing Functions</a></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.2-Symmetric_Key_Encryption.html">2.3.2 Symmetric Key Encryption</a></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.3-Asymmetric_Key_Encryption.html">2.3.3 Asymmetric Key Encryption</a></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.4-Unit_3_Knowledge_Quiz.html">2.3.4 Unit 3 Knowledge Quiz</a></li></ul></li><li><a href="/curriculum\Module-2\Unit-4-Authentication/index.html">Unit 4 Authentication</a><ul><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.1-Authentication_and_Authorisation.html">2.4.1 Authentication and Authorisation</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.2-What_is_middleware.html">2.4.2 What is middleware</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.3-Session_based_auth.html">2.4.3 Session based auth</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.4-Introduction_to_OAuth.html">2.4.4 Introduction to OAuth</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.5-Token_based_auth.html">2.4.5 Token based auth</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.6-OpenID_Connect.html">2.4.6 OpenID Connect</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.7-Unit_4_Knowledge_Quiz.html">2.4.7 Unit 4 Knowledge Quiz</a></li></ul></li></ul></li><li><a href="/curriculum\Module-3/index.html">Module 3</a><ul><li><a href="/curriculum\Module-3\Unit-1-The-SDLC/index.html">Unit 1 The SDLC</a><ul><li><a href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.1-Business_Impact.html">3.1.1 Business Impact</a></li></ul></li></ul></li></ul></nav>
        <h1>Route Parameters</h1>
<h2>Learning Objectives</h2>
<ul>
<li>Understand how to use route parameters to retrieve dynamic data from a URL</li>
</ul>
<h2>Pre-requisites</h2>
<p>TODO</p>
<h2>Lesson</h2>
<p>We want to read what is on the menu for our lovely looking restaurants. In this lesson we are going to create a web page for each individual restaurant.</p>
<p><figure><img src="https://user-images.githubusercontent.com/4499581/95021384-9caed100-0668-11eb-9fbc-9d93ea06a54b.jpg" alt="example of a restaurant web page displaying its menus and menu items"><figcaption></figcaption></figure></p>
<h3>Dynamic links</h3>
<p>To be able to click on a restaurant card and then view that restaurant's web page we need to create a dynamic link. We are going to do this by wrapping our restaurant card in an 'anchor' tag. We then make the <code>href</code> the address of a route on our server as follows:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Restaurants<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    {{#each restaurants}}
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/restaurants/{{this.id}}&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-image: url({{this.image}});&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>{{this.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>{{this.menus.length}} menus<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    {{/each}}
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<blockquote>
<p>As you hover over each card can you see the URL it links to in the bottom left-hand corner of your Browser? Clicking this link will cause a 404 error, as that page or resource does not exist yet.</p>
</blockquote>
<pre><code class="language-sh">Cannot GET /restaurants/2
</code></pre>
<h3>New 'retrieve restaurant' route</h3>
<p>To retrieve the data for a specific restaurant we need to add a new route on our server. Not just any route, the last part of our route is going to be different depending on which restaurant we are clicking on. In the URL segment of the route we indicate a route parameter <code>/:id</code> as shown below:</p>
<pre><code class="language-javascript">app.get(<span class="hljs-string">&#x27;/restaurants/:id&#x27;</span>, <span class="hljs-keyword">async</span> (request, response) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;get restaurant with ID:&quot;</span>, request.params.id)
    response.send()
})
</code></pre>
<blockquote>
<p>We can read the value of the route parameter using <code>request.params.id</code>. The example above doesn't return any data, what do you think we are going to do with this id?</p>
</blockquote>
<h3>New restaurant template</h3>
<p>Let's create the new template for this view. In the <code>views</code> folder, add a file called <code>restaurant.handlebars</code>. Add some HTML so you know you have wired the route up to the template ok and test the route.</p>
<p>Now we know our route and template are setup, we need to return the menu data. What arguments do you think we will pass to <code>response.render()</code>?</p>
<pre><code class="language-javascript">app.get(<span class="hljs-string">&#x27;/restaurants/:id&#x27;</span>, <span class="hljs-keyword">async</span> (request, response) =&gt; {
    <span class="hljs-keyword">const</span> restaurant = <span class="hljs-keyword">await</span> Restaurant.findByPk(req.params.id)
    <span class="hljs-keyword">const</span> menus = <span class="hljs-keyword">await</span> restaurant.getMenus({
        <span class="hljs-attr">include</span>: [{<span class="hljs-attr">model</span>: MenuItem, <span class="hljs-attr">as</span>: <span class="hljs-string">&#x27;items&#x27;</span>}],
        <span class="hljs-attr">nest</span>: <span class="hljs-literal">true</span>
    })
    response.render(<span class="hljs-string">&#x27;restaurant&#x27;</span>, {restaurant, menus})
})
</code></pre>
<h3>2 levels of iteration</h3>
<p>Our view of a restaurant requires us to iterate over the array of menus and within each menu to iterate over that menu's array of items. WOW! We can use the following HTML to display the menu and menu items. Note that the <code>&lt;dl&gt;</code> element is a 'description list', you can read more about it <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dl">here</a>.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{restaurant.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    {{#each menus}}
        <span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{this.title}}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span>
                {{#each this.items}}
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>{{this.name}}<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>£{{this.price}}<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                {{/each}}
            <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
    {{/each}}
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<p>To get the item name and price to line up nicely like below we can use Flexbox.</p>
<pre><code class="language-css"><span class="hljs-selector-tag">dl</span> <span class="hljs-selector-tag">div</span>{
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
}
</code></pre>
<h2>Assignment</h2>
<ol>
<li>Create the route and template to render a single restaurant as described above.</li>
<li>Add a <a href="https://www.w3schools.com/howto/howto_css_hero_image.asp">hero image</a> for the page<br>
<figure><img src="https://user-images.githubusercontent.com/4499581/95021581-adac1200-0669-11eb-84da-cfdf9befc65c.jpg" alt="example of a hero image"><figcaption></figcaption></figure></li>
<li>Commit your code into Github and share the link with your coach for review.</li>
</ol>
<h3>Assignment extension tasks</h3>
<p>TODO</p>

        <script src="/curriculum/js/tabbed-code-blocks.js"></script>
        <script>
            function toggleNav() {
                const button = document.getElementById('navigation-toggle')
                const isAriaExp = button.getAttribute('aria-expanded')
                const newAriaExp = (isAriaExp == "false") ? "true" : "false"
                button.setAttribute('aria-expanded', newAriaExp)
                const nav = document.getElementById('navigation')
                nav.style.display = nav.offsetParent ? 'none' : 'block'
            }
        </script>
    </body>
</html>
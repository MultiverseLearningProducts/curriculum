<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="utf-8">
        <title> Basic SQL commands</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="shortcut icon" type="image/x-icon" href="/curriculum/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/an-old-hope.min.css">
        <link rel="stylesheet" href="/curriculum/style.css"/>
        <script src="/curriculum/js/highlight.min.js"></script>
        <script src="/curriculum/js/bash.min.js"></script>
        <script src="/curriculum/js/java.min.js"></script>
        <script src="/curriculum/js/javascript.min.js"></script>
        <script src="/curriculum/js/sql.min.js"></script>
    </head>
    <body>
        <h1>Basic SQL commands</h1>
<h2>Learning Objectives</h2>
<p>Understand how to construct and execute SQL statements to create, read, update and delete data held in a relational database.</p>
<h2>Pre-requisites</h2>
<p>Sign up for a (free) <a href="https://repl.it/~">Repl</a> account</p>
<h2>Lesson</h2>
<p>A Relational Database Management System (RDBMS) refers to a database that stores data using rows and columns. Structured Query Language (SQL) is used to create, read, update, and delete data in RDMSs.</p>
<p><iframe src="https://docs.google.com/presentation/d/e/2PACX-1vQpmJ3NMHXf3v-uh4nT3O0keOjivstLweqSi7ZUbhvdFI1M6o4b2cDSFKFdz5YfakbewFyNjIdbrmBI/embed" width="100%" height="444px" allowfullscreen frameborder=0></iframe></p>
<p>Relational Databases stores data in tables. Here is an example table called COMPANIES, which stores data about software companies:</p>
<table>
<thead>
<tr><th><strong>Id</strong></th><th><strong>Company</strong></th><th><strong>Location</strong></th><th><strong>Number of employees</strong></th></tr>
</thead>
<tbody>
<tr><td>1</td><td>Google</td><td>Mountain View</td><td>135000</td></tr>
<tr><td>2</td><td>Apple</td><td>Cupertino</td><td>147000</td></tr>
</tbody>
</table>
<p><strong>Activity</strong> - in the 'chat' function, post the names of relational database you have heard of or used</p>
<p>Tables are made up of columns, each which have a specific Data Type.</p>
<p>The Data Types for SQLite are as follows:</p>
<table>
<thead>
<tr><th>Data type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>NULL</td><td>The value is a NULL value</td></tr>
<tr><td>INTEGER</td><td>The value is a signed integer</td></tr>
<tr><td>REAL</td><td>The value is a floating point value</td></tr>
<tr><td>TEXT</td><td>The value is a text string</td></tr>
<tr><td>BLOB</td><td>The value is a blob of data</td></tr>
</tbody>
</table>
<p>The SQL command to create the above table would be:</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> COMPANIES(id <span class="hljs-type">INTEGER</span>, 
                          name TEXT, 
                          location TEXT,
                          numEmployees <span class="hljs-type">INTEGER</span>);
</code></pre>
<p>It's important to note that the syntax for creating tables and naming of data types does vary slightly between different database vendors.</p>
<p>A column (or set of columns) marked as a <strong>PRIMARY KEY</strong> is a column (or set of columns) that has to be unique i.e. you cannot insert rows with the same value in this column/s and cannot be null. It is good practice to have a PRIMARY KEY on each table. The syntax for adding a PRIMARY KEY is as follows:</p>
<pre><code class="language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> COMPANIES(id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY</span> KEY, 
                          name TEXT, 
                          location TEXT,
                          numEmployees <span class="hljs-type">INTEGER</span>);
</code></pre>
<p>Here, we are specifying that the <code>id</code> column is the PRIMARY KEY i.e. has to have unique values.</p>
<p>An alternative to creating your own unique identifier to populate an <code>id</code> column is to use an AUTO INCREMENTing number. SQL provides <a href="https://www.w3schools.com/sql/sql_autoincrement.asp">a way to to do this</a>.</p>
<p><strong>Activity</strong> - Work through the <a href="https://www.w3schools.com/sql/sql_syntax.asp">W3Schools SQL Tutorial</a> up to and including the 'SQL Delete' lesson. This tutorial will enable you to understand how to create, read, update and delete (CRUD) data to / from a SQL database. Once you are comfortable with this syntax, move on to look at how to <a href="https://www.w3schools.com/sql/sql_create_table.asp">create a table</a> &amp; <a href="https://www.w3schools.com/sql/sql_drop_table.asp">drop a table</a>.</p>
<h2>Assignment</h2>
<p>Here is a UML class diagram representing a model for a restaurant ordering app.</p>
<p><figure><img src="https://user-images.githubusercontent.com/1316724/111300668-3ed7d980-8649-11eb-99b2-5a842259c4ed.png" alt="UML Class Diagram showing Restaurant, Menu and MenuItem classes and attributes"><figcaption></figcaption></figure></p>
<p>Imagine we write some code to create instances of these classes with real restaurant and menu data. The problem is all the data is lost when your app stops. The data that makes the app persists only in memory, so when the process dies, so does the data. Your challenge in this assignment is to provide a persistent way of storing this data.</p>
<ol>
<li>Using a <code>SQLite</code> Repl, compose the SQL queries to do the following:
<ul>
<li>Implement the Restaurants, Menus and MenuItems tables - make the id of each a PRIMARY KEY (this has to be unique) and make this AUTO INCREMENTing</li>
<li>Insert rows into each table using &quot;INSERT&quot;</li>
<li>Read back your row data using &quot;SELECT&quot;</li>
<li>Update your rows using &quot;UPDATE&quot;</li>
<li>Delete your rows using &quot;DELETE&quot;</li>
<li>Use the WHERE clause to filter results</li>
</ul></li>
<li>Share your repl with your coach on Slack so they can provide feedback</li>
</ol>
<p>You should also be aware of 2 SQLite specific SQL statements which will help you.</p>
<p>The <code>PRAGMA</code> command describes a table by listing its columns and indicating which column is the primary key.</p>
<pre><code class="language-sql">PRAGMA table_info(CUSTOMERS);
</code></pre>
<p>The following command lists all the tables in the database:</p>
<pre><code class="language-sql"><span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> sqlite_master <span class="hljs-keyword">WHERE</span> type<span class="hljs-operator">=</span><span class="hljs-string">&#x27;table&#x27;</span>
</code></pre>
<h3>Assignment extension tasks</h3>
<p>Explore the SQL documentation for the <code>SUM</code>, <code>COUNT</code> and <code>GROUP BY</code> aggregate functions</p>
<p>Research how you would modify a table's structure after it has been created.</p>
<h2>Additional resources</h2>
<p><a href="https://www.mongodb.com/nosql-explained/nosql-vs-sql">NoSQL versus SQL databases</a></p>

        <script src="/curriculum/js/tabbed-code-blocks.js"></script>
    </body>
</html>
<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="utf-8">
        <title> The Document Object Model (DOM)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="shortcut icon" type="image/x-icon" href="/curriculum/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/an-old-hope.min.css">
        <link rel="stylesheet" href="/curriculum/style.css"/>
        <script src="/curriculum/js/highlight.min.js"></script>
        <script src="/curriculum/js/bash.min.js"></script>
        <script src="/curriculum/js/java.min.js"></script>
        <script src="/curriculum/js/javascript.min.js"></script>
        <script src="/curriculum/js/sql.min.js"></script>
    </head>
    <body>
        <button 
            id="navigation-toggle"
            aria-expanded="false"
            aria-haspopup="true"
            onclick="toggleNav()"
            onkeydown="event => {event.keyCode === 13 ? toggleNav() : null}"
            tabindex="1">Table of contents</button>
        <nav id="navigation"><ul><li><a href="/curriculum\Bootcamp/index.html">Bootcamp</a><ul><li><a href="/curriculum\Bootcamp\FAQ.html">FAQ</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming/index.html">Unit 1 Object Oriented Programming</a><ul><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.1-JavaScript_Objects_And_Functions.html">0.1.1 JavaScript Objects And Functions</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.2-Test_Driven_Development.html">0.1.2 Test Driven Development</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.3-Objects_in_an_Airport_Domain.html">0.1.3 Objects in an Airport Domain</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.4-Static_functions_and_properties.html">0.1.4 Static functions and properties</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.5-Inheritance.html">0.1.5 Inheritance</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.6-UML_Modelling.html">0.1.6 UML Modelling</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.7-OOP_Challenge.html">0.1.7 OOP Challenge</a></li><li><a href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.8-End_of_Unit_Quiz_OOP.html">0.1.8 End of Unit Quiz OOP</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript/index.html">Unit 2 Asynchronous JavaScript</a><ul><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.1-Asynchronous_JavaScript.html">0.2.1 Asynchronous JavaScript</a></li><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.2-Promises.html">0.2.2 Promises</a></li><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.3-Asynchronous_Airport_Data_Load.html">0.2.3 Asynchronous Airport Data Load</a></li><li><a href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.4-End_of_Unit_Quiz_Async.html">0.2.4 End of Unit Quiz Async</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases/index.html">Unit 3 Relational Databases</a><ul><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.1-Logical_Data_Model.html">0.3.1 Logical Data Model</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.10-Sequelize_part_2.html">0.3.10 Sequelize part 2</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.11-End_of_Unit_Quiz_Databases.html">0.3.11 End of Unit Quiz Databases</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.2-Introduction_to_Databases.html">0.3.2 Introduction to Databases</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.3-Basic_SQL_Commands.html">0.3.3 Basic SQL Commands</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.4-SQL_Joins.html">0.3.4 SQL Joins</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.5-Database_access_using_Node.html">0.3.5 Database access using Node</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.6-Populating_databases_from_JSON.html">0.3.6 Populating databases from JSON</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.7-Object_Relational_Mapping_part_1.html">0.3.7 Object Relational Mapping part 1</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.8-Object_Relational_Mapping_part_2.html">0.3.8 Object Relational Mapping part 2</a></li><li><a href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.9-Sequelize_part_1.html">0.3.9 Sequelize part 1</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers/index.html">Unit 4 RESTful Servers</a><ul><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.1-Web_Servers.html">0.4.1 Web Servers</a></li><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.2-Application_Servers.html">0.4.2 Application Servers</a></li><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.3-Postman.html">0.4.3 Postman</a></li><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.4-Route_Parameters.html">0.4.4 Route Parameters</a></li><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.5-CRUD_operations.html">0.4.5 CRUD operations</a></li><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.6-Server_side_Validation.html">0.4.6 Server side Validation</a></li><li><a href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.7-End_of_Unit_Quiz_RESTful.html">0.4.7 End of Unit Quiz RESTful</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction/index.html">Unit 5 Human Computer Interaction</a><ul><li><a href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.1-Human_Computer_Interaction.html">0.5.1 Human Computer Interaction</a></li><li><a href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.2-Server_Side_Rendering.html">0.5.2 Server Side Rendering</a></li><li><a href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.3-The_Document_Object_Model.html">0.5.3 The Document Object Model</a></li><li><a href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.4-HTML_forms_and_lists.html">0.5.4 HTML forms and lists</a></li><li><a href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.5-End_of_Unit_Quiz_HCI.html">0.5.5 End of Unit Quiz HCI</a></li></ul></li><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project/index.html">Unit 6 End Of Bootcamp Group Project</a><ul><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.1-Introduction.html">0.6.1 Introduction</a></li><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.2-Requirements.html">0.6.2 Requirements</a></li><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.3-Agile_Development.html">0.6.3 Agile Development</a></li><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.4-Design.html">0.6.4 Design</a></li><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.5-GitHub_Projects.html">0.6.5 GitHub Projects</a></li><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.6-Branching_and_Pull_Requests.html">0.6.6 Branching and Pull Requests</a></li><li><a href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.7-Deployment_with_Heroku.html">0.6.7 Deployment with Heroku</a></li></ul></li></ul></li><li><a href="/curriculum\Module-1/index.html">Module 1</a><ul><li><a href="/curriculum\Module-1\Unit-1-Agile_user_requirements/index.html">Unit 1 Agile user requirements</a><ul><li><a href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.1-Introduction_to_Agile.html">1.1.1 Introduction to Agile</a></li><li><a href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.2-Personas.html">1.1.2 Personas</a></li><li><a href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.3-User_Stories.html">1.1.3 User Stories</a></li><li><a href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.4-Requirements.html">1.1.4 Requirements</a></li><li><a href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.5-Next_Steps.html">1.1.5 Next Steps</a></li></ul></li><li><a href="/curriculum\Module-1\Unit-2-Designing_UI/index.html">Unit 2 Designing UI</a><ul><li><a href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.1-Usability_heuristics.html">1.2.1 Usability heuristics</a></li><li><a href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.2-Composition_and_components_in_design.html">1.2.2 Composition and components in design</a></li><li><a href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.3-Prototyping_UI.html">1.2.3 Prototyping UI</a></li><li><a href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.4-From_low_fi_to_hi_fi.html">1.2.4 From low fi to hi fi</a></li></ul></li><li><a href="/curriculum\Module-1\Unit-3-Building_UI_with_a_framework/index.html">Unit 3 Building UI with a framework</a><ul><li><a href="/curriculum\Module-1\Unit-3-Building_UI_with_a_framework\1.3.1-Implementing_a_frontend_design.html">1.3.1 Implementing a frontend design</a></li><li><a href="/curriculum\Module-1\Unit-3-Building_UI_with_a_framework\1.3.2-Working_with_dynamic_data.html">1.3.2 Working with dynamic data</a></li><li><a href="/curriculum\Module-1\Unit-3-Building_UI_with_a_framework\1.3.3-Execute_your_designs.html">1.3.3 Execute your designs</a></li></ul></li><li><a href="/curriculum\Module-1\Unit-4-Accessibility/index.html">Unit 4 Accessibility</a><ul><li><a href="/curriculum\Module-1\Unit-4-Accessibility\1.4.1-Inclusive_design.html">1.4.1 Inclusive design</a></li><li><a href="/curriculum\Module-1\Unit-4-Accessibility\1.4.2-Accessibility.html">1.4.2 Accessibility</a></li><li><a href="/curriculum\Module-1\Unit-4-Accessibility\1.4.3-Offline_assignment.html">1.4.3 Offline assignment</a></li></ul></li><li><a href="/curriculum\Module-1\Unit-5-End_to_end_testing/index.html">Unit 5 End to end testing</a><ul><li><a href="/curriculum\Module-1\Unit-5-End_to_end_testing\1.5.1-End_to_end_testing.html">1.5.1 End to end testing</a></li><li><a href="/curriculum\Module-1\Unit-5-End_to_end_testing\1.5.2-Test_cases_and_equivalence_testing.html">1.5.2 Test cases and equivalence testing</a></li></ul></li></ul></li><li><a href="/curriculum\Module-2/index.html">Module 2</a><ul><li><a href="/curriculum\Module-2\Unit-1-The_Anatomy_of_the_HTTP_request/index.html">Unit 1 The Anatomy of the HTTP request</a><ul><li><a href="/curriculum\Module-2\Unit-1-The_Anatomy_of_the_HTTP_request\2.1.1-Identifying_the_different_parts_of_HTTP.html">2.1.1 Identifying the different parts of HTTP</a></li><li><a href="/curriculum\Module-2\Unit-1-The_Anatomy_of_the_HTTP_request\2.1.2-Programmatic_HTTP_requests.html">2.1.2 Programmatic HTTP requests</a></li></ul></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST/index.html">Unit 2 What is REST</a><ul><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.1-REST_and_the_openAPI_spec.html">2.2.1 REST and the openAPI spec</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.2-The_OpenAPI_spec.html">2.2.2 The OpenAPI spec</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.3-Build_an_OpenAPI_RESTful_service.html">2.2.3 Build an OpenAPI RESTful service</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.4-Integration_tests.html">2.2.4 Integration tests</a></li><li><a href="/curriculum\Module-2\Unit-2-What_is_REST\2.2.5-Unit_2_Knowledge_quiz.html">2.2.5 Unit 2 Knowledge quiz</a></li></ul></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography/index.html">Unit 3 Cryptography</a><ul><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.1-Hashing_Functions.html">2.3.1 Hashing Functions</a></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.2-Symmetric_Key_Encryption.html">2.3.2 Symmetric Key Encryption</a></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.3-Asymmetric_Key_Encryption.html">2.3.3 Asymmetric Key Encryption</a></li><li><a href="/curriculum\Module-2\Unit-3-Cryptography\2.3.4-Unit_3_Knowledge_Quiz.html">2.3.4 Unit 3 Knowledge Quiz</a></li></ul></li><li><a href="/curriculum\Module-2\Unit-4-Authentication/index.html">Unit 4 Authentication</a><ul><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.1-Authentication_and_Authorisation.html">2.4.1 Authentication and Authorisation</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.2-What_is_middleware.html">2.4.2 What is middleware</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.3-Session_based_auth.html">2.4.3 Session based auth</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.4-Introduction_to_OAuth.html">2.4.4 Introduction to OAuth</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.5-Token_based_auth.html">2.4.5 Token based auth</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.6-OpenID_Connect.html">2.4.6 OpenID Connect</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.7-Banking_App.html">2.4.7 Banking App</a></li><li><a href="/curriculum\Module-2\Unit-4-Authentication\2.4.8-Unit_4_Knowledge_Quiz.html">2.4.8 Unit 4 Knowledge Quiz</a></li></ul></li></ul></li><li><a href="/curriculum\Module-3/index.html">Module 3</a><ul><li><a href="/curriculum\Module-3\Unit-1-The-SDLC/index.html">Unit 1 The SDLC</a><ul><li><a href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.1-The_Software_Development_Life_Cycle.html">3.1.1 The Software Development Life Cycle</a></li><li><a href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.2-The_roles_and_responsibilities_in_the_SDLC_with_communication.html">3.1.2 The roles and responsibilities in the SDLC with communication</a></li><li><a href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.3-Communication_in_your_teams.html">3.1.3 Communication in your teams</a></li></ul></li><li><a href="/curriculum\Module-3\Unit-2-The-7-Princibles-of-Testing/index.html">Unit 2 The 7 Princibles of Testing</a><ul><li><a href="/curriculum\Module-3\Unit-2-The-7-Princibles-of-Testing\3.2.1-The_7_Princibles_of_Testing.html">3.2.1 The 7 Princibles of Testing</a></li><li><a href="/curriculum\Module-3\Unit-2-The-7-Princibles-of-Testing\3.2.2-Continuous_Deployment.html">3.2.2 Continuous Deployment</a></li></ul></li><li><a href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance/index.html">Unit 3 Deployment and Maintenance</a><ul><li><a href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance\3.3.1-Containerisation_with_docker.html">3.3.1 Containerisation with docker</a></li><li><a href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance\3.3.2-Introduction_to_Cloud_Computing.html">3.3.2 Introduction to Cloud Computing</a></li><li><a href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance\3.3.3-Monitoring_and_Maintenance.html">3.3.3 Monitoring and Maintenance</a></li></ul></li></ul></li></ul></nav>
        <h1>The Document Object Model (DOM)</h1>
<p>The document object model is the data structure that a browser reads to display content in a browser. Often referred to as the DOM it is a data structure that includes data we see in the <code>&lt;body&gt;</code> tag and data we don't see in the <code>&lt;head&gt;</code> tag.</p>
<h2>Learning Objectives</h2>
<ol>
<li>Use the API methods on the <code>document</code> object that will enable programatic operations; create nodes, read values out of the DOM, update parts of the DOM tree, and delete nodes - (CRUD).</li>
<li>Evaluate the benefits and problems with manipulating the DOM using javascript in this way.</li>
</ol>
<h2>The history of the DOM</h2>
<p>HTML existed long before the mid-90s and web pages could be styled in rudimentary ways, with styles controlled by HTML (e.g. <code>&lt;center&gt;Centred text&lt;/center&gt;</code>). Later, in 1996, CSS would be released and would allow developers to decouple presentation (CSS) from document structure (HTML). The structure of web pages and styling was now standardised, but what about interactivity? What if the developer wanted to tell the user what the date and time was, or open a new window programmatically?</p>
<p>Around this time, Microsoft and Netscape were duking it out for browser superiority and it was in fact a Netscape developer (Brandan Eich), who created a client-side scripting language in ten days that would later become JavaScript. It was initially called Mocha, then LiveScript, then later, JavaScript. It wasn't without its problems, but JavaScript enabled designers and developers to easily add dynamic features to their websites. For this reason, JavaScript rapidly emerged as the standard scripting language for the web.</p>
<p>As we learned above, Microsoft and Netscape were the main players in the mid-90s browser market. Each company favoured their own implementation of JavaScript; Microsoft had JScript and Netscape and JavaScript. Microsoft's JScript was actually just JavaScript but with a different name to avoid trademark issues.</p>
<p>The first unofficial version of the DOM was called the <code>Legacy DOM</code> and this paved the way for client-side validation and other visual effects. At this point though, implementations of web pages with dynamic behaviour started to diverge. Whilst some Legacy DOM operations remained compatible, other dynamic extensions did not.</p>
<p>By the time JavaScript was standardised in 1997, the W3C set out its recommendations for the stardardisation of the DOM. The DOM is now standardised across all browsers and is maintained by the Web Hypertext Application Technology Working Group (WHATWG).</p>
<h2>The DOM tree</h2>
<p>The document is a tree like structure. The root of the tree structure is the <code>&lt;html&gt;</code> tag. Tags throughout the document have an opening and closing parts. They are pairs with the opening tag enclosed by angle brackets and the closing tag enclosed by angle brackets and a leading 'forward slash'. This is also called a node.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Nodes have 'children'. The <code>&lt;html&gt;</code> tag has 2 children: <code>&lt;head&gt;</code> and <code>&lt;body&gt;</code>. A node has children by enclosing them between its opening and closing tags. A node can have children, and those children can have children. Eventually a node will have content.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>My Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>A Heading<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/link-url&quot;</span>&gt;</span>Link text<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Below is a visual representation of the HTML above. Can you see where it gets the name 'tree' from?<br>
<figure><img src="https://camo.githubusercontent.com/e693acae170c9dae5937db98a89eaa039ff192d5aacb7c1ebd8748a780b90977/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f3730302f312a357a4b637a764732313946534c6962485148346a53412e706e67" alt="An diagram of the document object model for a simple HTML page"><figcaption></figcaption></figure></p>
<p>The great power of XML like structures of which HTML is an example is the way additional attributes can be added to the node. In the example above the <code>&lt;button&gt;</code> element has content; the text &quot;Click Me&quot; and 2 attributes, a <code>type</code> attribute that makes it a submit button, and a <code>disabled</code> attribute that prevents the button being clickable. These html attributes are key value pairs (key=&quot;value&quot;) and they are added to the opening tag.</p>
<p>It is very helpful to have this mental picture of the DOM as a tree. You can explore the tree like structure of HTML documents for yourself by adding the 'DOM node tree viewer' extension to chrome. With this extension you'll be able to explore the DOM tree of any site you visit.</p>
<p>❓What other tree like structures can you think of? (not including actual trees)</p>
<h2>Accessing the DOM with JS</h2>
<p>When we write HTML we are constructing this tree. Once it is loaded in the browser we can programmatically access this tree structure using Javascript. The first thing to learn is how to get our javascript running in the browser along side the DOM.</p>
<h3>Loading JS in the browser</h3>
<p>There are 3 ways to write javascript and have it run in the browser.</p>
<ol>
<li>inline</li>
<li>in a <code>&lt;script&gt;</code> tag</li>
<li>using <code>src</code> attribute</li>
</ol>
<h4>Inline</h4>
<p>You can write javascript as a value for some HTML attributes. For example you can write javascript to handle a <code>onclick</code> event.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;JS-test-id&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;(event) =&gt; {console.info(event.target.id)}&quot;</span>&gt;</span>Test JS<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>This HTML element will be rendered with an event listener listening for the 'click' event on the button, we have also provided a line of javascript code for that handler to run - it should log in the console the id of the element that was just clicked - <code>JS-test-id</code>. The <code>event</code> object you see above is injected by the browser.</p>
<h4>script tag</h4>
<p>You can open a <code>&lt;script&gt;</code> tag and inside this tag write javascript. This block of javascript code is run when the page loads.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> socket = <span class="hljs-keyword">new</span> Websocket(<span class="hljs-string">&#x27;ws://localhost:3000/&#x27;</span>)
    socket.on(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> {
        renderChatMessage(msg.data)
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4>from a source file</h4>
<p>You can write your javascript in a source file and serve that file via a web server so the file has a URL (universal remote locator or 'web address'). A <code>&lt;script&gt;</code> tag that references a file's URL as a value in its <code>src</code> attribute will load that file in the browser.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://localhost:3000/js/main.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>The content of the file becomes the content of the <code>&lt;script&gt;</code> tag and is executed when the file has finished loading.</p>
<h3>Reference the DOM in javascript</h3>
<p>Javascript that runs in the browser will be able to reference other javascript objects that are injected into the global scope by the browser. For example the <code>document</code> object.</p>
<p>We can write code that uses functions that are properties of this globally scoped object. Global scope in the browser means the <code>document</code> object can be referenced by any of your code any where in your code.</p>
<p>Lets create a programmatic reference to a DOM node based on it's id.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;JS-test-id&#x27;</span>)
</code></pre>
<p>I now have a reference to a DOM element I can manipulate it programmatically.</p>
<pre><code class="language-javascript">element.classList.add(<span class="hljs-string">&#x27;active&#x27;</span>)
</code></pre>
<p>That code just added a class called 'active' to the button element.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;JS-test-id&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>Test JS<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>Changed your mind? What if you wanted to remove a class?</p>
<pre><code class="language-javascript">element.classList.remove(<span class="hljs-string">&#x27;active&#x27;</span>)
</code></pre>
<p>There is a very <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document">extensive API</a> for the <code>document</code> object. For our purposes we want to learn to do the following: Create, read, update and delete nodes thus we will be able to manipulate the DOM using javascript.</p>
<h2>Manipulating the DOM with JS</h2>
<p>The code examples that follow will look at how to take a simple JSON data structure and create, read, update and delete that data structure in the UI layer of the browser.</p>
<h3>Create</h3>
<p>The first thing we are going to do is create a new node in the DOM tree that will be the root node for all the nodes that will be our menu items. The <code>document</code> API exposes a few functions we can use to create DOM nodes.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> menuListElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;ul&quot;</span>)
<span class="hljs-built_in">document</span>.body.append(menuListElement)
</code></pre>
<p>Above we are appending a new node <code>menuListElement</code> to the root node <code>body</code>. The content of this node is going to be other nodes, or children. This is an important thing to consider as we work with our tree like structure. The content of this node is not 'content', it's other nodes. We will create DOM nodes that render the data of each item in the data array. These will be 'leaf' nodes; they will terminate the branching by yielding the content. Our aim is to see and read these menu items with their prices in the browser.</p>
<pre><code class="language-json">[
    {
        <span class="hljs-attr">&quot;item&quot;</span>: <span class="hljs-string">&quot;Mackerel, wakame dashi, Cornish baby beetroots&quot;</span>,
        <span class="hljs-attr">&quot;price&quot;</span>: <span class="hljs-number">17.00</span>,
        <span class="hljs-attr">&quot;isVegetarian&quot;</span>: <span class="hljs-literal">false</span>
    },
    {
        <span class="hljs-attr">&quot;item&quot;</span>: <span class="hljs-string">&quot;Heritage mixed beetroots, goats curd dumpling, vanilla&quot;</span>,
        <span class="hljs-attr">&quot;price&quot;</span>: <span class="hljs-number">25.00</span>,
        <span class="hljs-attr">&quot;isVegetarian&quot;</span>: <span class="hljs-literal">true</span>
    },
]
</code></pre>
<p>As we iterate over the array of menu items we need to create valid DOM nodes for each item and append them (add them) to the parent node <code>menuListElement</code>. There are a number of steps to do this if we are to honour the data structure of the DOM tree.</p>
<h4>Create the <code>&lt;li&gt;</code> element</h4>
<p>We have to create another valid DOM node. That could be a <code>&lt;li&gt;</code>, <code>&lt;article&gt;</code>, or any HTML <a href="https://www.w3schools.com/TAGS/">tag in this list</a>. As this will be an item in a list I'm going to create a <code>&lt;li&gt;</code> element.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> menuItemElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;li&quot;</span>)
</code></pre>
<p>The variable <code>menuItemElement</code> is now a valid DOM element. We have created a node that can be added to the DOM tree. At the moment it is empty; we need to add the child nodes that this node is the parent of. There are 3 pieces of content to display so this node does not actually have content it just has 3 child nodes. In the code example below, I am iterating over the JSON above and dealing with each item in the JSON array using <code>forEach</code>.</p>
<pre><code class="language-javascript">menuItemsData.forEach(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> menuItemElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;li&quot;</span>)
    <span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.createTextNode(data.item)
    <span class="hljs-keyword">const</span> price = <span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">` £<span class="hljs-subst">${data.price}</span>`</span>)
    
    menuItemElement.appendChild(item)
    menuItemElement.appendChild(price)
    menuElement.appendChild(menuItemElement)
})
</code></pre>
<p>In the first part of the function above we create content nodes using <code>createTextNode</code>, then we do the work of assembling our subtree structure by appending the item and price text to the <code>&lt;li&gt;</code>, then finally adding the <code>&lt;li&gt;</code> to the parent <code>menuElement</code>.</p>
<h4>Use logic and add attributes</h4>
<p>To take this a step further we have a boolean value in our data so if a dish is vegetarian we could display a small icon. As we are writing javascript code we can use logic so only dishes with the <code>isVegetarian</code> flag set to true will append an <code>&lt;img&gt;</code> to the <code>&lt;li&gt;</code>.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">if</span>(data.isVegetarian) {
    <span class="hljs-keyword">const</span> isVegIcon = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;img&quot;</span>)
    isVegIcon.setAttribute(<span class="hljs-string">&quot;src&quot;</span>, <span class="hljs-string">&quot;http://clipart-library.com/images/zTXodk5Ec.png&quot;</span>)
    isVegIcon.setAttribute(<span class="hljs-string">&quot;style&quot;</span>, <span class="hljs-string">&quot;height:1rem;margin-left:.25rem;&quot;</span>)
    menuItemElement.appendChild(isVegIcon)
}
</code></pre>
<p>Can you see the way we can manipulate the attributes of the DOM elements we are creating? For example adding the src url of an image, and adding inline CSS styles. Powerful.</p>
<h2>Read</h2>
<p>Can you see your menu items rendered in the browser?</p>
<p>We'll be able to now read from the DOM tree. If I wanted to read the price of the last menu item I can access and read the content of a DOM node like this.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> lastListElement = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;ul li:last-child&quot;</span>)
lastListElement.innerText.substring(lastListElement.innerText.length - <span class="hljs-number">3</span>)
</code></pre>
<p>To access elements in the DOM you can assign a unique id to the element i.e. <code>my-id</code>. To select this element use <code>document.getElementById('my-id')</code>. To access elements in the DOM without using <code>document.getElementById</code> you can use <code>document.querySelector</code> combined with CSS selectors to help you target elements in the DOM tree.</p>
<ul>
<li><code>document.getElementById</code> - use the id of the element</li>
<li><code>document.querySelector</code> - use a CSS selector returns first one it finds</li>
<li><code>docuemtn.querySelectorAll</code> - use CSS selector returns many elements</li>
</ul>
<h2>Update</h2>
<p>If something in our menu list needs to change we can do the work of updating what is currently in the DOM. For this example we are going to update the price of the first item in the list to be £20.00. Remember the source of truth for our menu is the JSON data structure, not the UI layer. To make an update we modify the underlying data, then use that data as a bases to render our UI representation.</p>
<p>How would you go about updating the JSON data structure?</p>
<p>To re-render the list from a new version of the data we are going to use another part of the DOM API called <code>DocumentFragment</code>. A common use for <code>DocumentFragment</code> is to create an instance of a fragment, then assemble a DOM subtree within it using javascript <code>forEach</code>, then append or insert the fragment into the DOM using Node interface methods such as <code>appendChild()</code> or <code>insertBefore()</code>. Doing this moves the fragment's nodes into the DOM, leaving behind an empty <code>DocumentFragment</code>. Because all of the nodes are inserted into the document at once, only one reflow and render is triggered instead of potentially one for each node inserted if they were inserted separately. This is more performant.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">const</span> updateFragment = <span class="hljs-keyword">new</span> DocumentFragment()

menuItemsData.forEach(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> menuItemElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;li&quot;</span>)
    <span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.createTextNode(data.item)
    <span class="hljs-keyword">const</span> price = <span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-string">` £<span class="hljs-subst">${data.price}</span>`</span>)
    
    menuItemElement.appendChild(item)
    menuItemElement.appendChild(price)
    
    updateFragment.appendChild(menuItemElement)
})

menuElement.append(updateFragment)
</code></pre>
<h2>Destroy</h2>
<p>The final operation to learn about is deleting elements from the DOM tree. Lets remove the first item on the menu. Start with your data model. Remove the item from the array (using splice). You'll have to figure out the index of the item that was clicked. You can then just re-render the list.</p>
<p>Sometimes you might want to <code>remove</code> a node in the DOM tree. You can select the node and call <code>remove()</code> on it. In the code example below we remove the last item in the list.</p>
<pre><code class="language-javascript"><span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&#x27;li:last-child&#x27;</span>).remove()
</code></pre>
<h2>Assignment</h2>
<p>Can you manipulate the DOM tree using javascript? You should be able to make a <code>GET</code> request to your server in order to retrieve restaurant data from your API server. You can use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a> for this.</p>
<ul>
<li>Your <code>restaurant.handlebars</code> template should have some static structured elements like a header with the site's title, a nav bar and a childless element that will be the parent for the menu data.</li>
<li>Use <code>fetch</code> to grab that restaurant's data (including menus and items) then render it to the page according to your design.</li>
</ul>
<h4>Extension</h4>
<ul>
<li>Add a delete button to each menu item that will delete the item if it is clicked.</li>
<li>In a README.md file analysis manipulating the DOM using javascript by creating a list of the pros and cons based on your experience of implementing your script.</li>
</ul>

        <script src="/curriculum/js/tabbed-code-blocks.js"></script>
        <script>
            function toggleNav() {
                const button = document.getElementById('navigation-toggle')
                const isAriaExp = button.getAttribute('aria-expanded')
                const newAriaExp = (isAriaExp == "false") ? "true" : "false"
                button.setAttribute('aria-expanded', newAriaExp)
                const nav = document.getElementById('navigation')
                nav.style.display = nav.offsetParent ? 'none' : 'block'
            }
        </script>
    </body>
</html>
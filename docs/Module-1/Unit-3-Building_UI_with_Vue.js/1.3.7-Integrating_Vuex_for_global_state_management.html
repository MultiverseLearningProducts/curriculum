<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="utf-8">
        <title> Integrating Vuex</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="shortcut icon" type="image/x-icon" href="/curriculum/favicon.ico"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/an-old-hope.min.css">
        <link rel="stylesheet" href="/curriculum/style.css"/>
        <script src="/curriculum/js/highlight.min.js"></script>
        <script src="/curriculum/js/bash.min.js"></script>
        <script src="/curriculum/js/java.min.js"></script>
        <script src="/curriculum/js/javascript.min.js"></script>
        <script src="/curriculum/js/sql.min.js"></script>
    </head>
    <body>
        <button 
            id="navigation-toggle"
            aria-expanded="false"
            aria-haspopup="true"
            onclick="toggleNav()"
            onkeydown="event => {event.keyCode === 13 ? toggleNav() : null}"
            tabindex="1">Table of contents</button>
        <nav id="navigation"><ul><details><summary>Bootcamp</summary><ul><details><summary>Unit 1 Object Oriented Programming</summary><ul><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.0-UML_Modelling.html">0.1.0 UML Modelling</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.1-JavaScript_Objects_And_Functions.html">0.1.1 JavaScript Objects And Functions</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.2-Test_Driven_Development.html">0.1.2 Test Driven Development</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.3-Objects_in_an_Airport_Domain.html">0.1.3 Objects in an Airport Domain</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.4-Static_functions_and_properties.html">0.1.4 Static functions and properties</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.5-Inheritance.html">0.1.5 Inheritance</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.7-OOP_Challenge.html">0.1.7 OOP Challenge</a></li><li><a href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.8-End_of_Unit_Quiz_OOP.html">0.1.8 End of Unit Quiz OOP</a></li></ul></details><details><summary>Unit 2 Asynchronous JavaScript</summary><ul><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.1-Asynchronous_JavaScript.html">0.2.1 Asynchronous JavaScript</a></li><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.2-Promises.html">0.2.2 Promises</a></li><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.3-Asynchronous_Airport_Data_Load.html">0.2.3 Asynchronous Airport Data Load</a></li><li><a href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.4-End_of_Unit_Quiz_Async.html">0.2.4 End of Unit Quiz Async</a></li></ul></details><details><summary>Unit 3 Relational Databases</summary><ul><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.10-Sequelize_part_2.html">0.3.10 Sequelize part 2</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.11-End_of_Unit_Quiz_Databases.html">0.3.11 End of Unit Quiz Databases</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.2-Introduction_to_Databases.html">0.3.2 Introduction to Databases</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.3-Basic_SQL_Commands.html">0.3.3 Basic SQL Commands</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.4-SQL_Joins.html">0.3.4 SQL Joins</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.5-Database_access_using_Node.html">0.3.5 Database access using Node</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.6-Populating_databases_from_JSON.html">0.3.6 Populating databases from JSON</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.7-Object_Relational_Mapping_part_1.html">0.3.7 Object Relational Mapping part 1</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.8-Object_Relational_Mapping_part_2.html">0.3.8 Object Relational Mapping part 2</a></li><li><a href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.9-Sequelize_part_1.html">0.3.9 Sequelize part 1</a></li></ul></details><details><summary>Unit 4 RESTful Servers</summary><ul><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.1-Web_Servers.html">0.4.1 Web Servers</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.2-Application_Servers.html">0.4.2 Application Servers</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.3-Postman.html">0.4.3 Postman</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.4-Route_Parameters.html">0.4.4 Route Parameters</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.5-CRUD_operations.html">0.4.5 CRUD operations</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.6-Server_side_Validation.html">0.4.6 Server side Validation</a></li><li><a href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.7-End_of_Unit_Quiz_RESTful.html">0.4.7 End of Unit Quiz RESTful</a></li></ul></details><details><summary>Unit 5 Human Computer Interaction</summary><ul><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.1-Human_Computer_Interaction.html">0.5.1 Human Computer Interaction</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.2-Server_Side_Rendering.html">0.5.2 Server Side Rendering</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.3-The_Document_Object_Model.html">0.5.3 The Document Object Model</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.4-HTML_forms_and_lists.html">0.5.4 HTML forms and lists</a></li><li><a href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.5-End_of_Unit_Quiz_HCI.html">0.5.5 End of Unit Quiz HCI</a></li></ul></details><details><summary>Unit 6 End Of Bootcamp Group Project</summary><ul><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.1-Introduction.html">0.6.1 Introduction</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.2-Requirements.html">0.6.2 Requirements</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.3-Agile_Development.html">0.6.3 Agile Development</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.4-Design.html">0.6.4 Design</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.5-GitHub_Projects.html">0.6.5 GitHub Projects</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.6-Branching_and_Pull_Requests.html">0.6.6 Branching and Pull Requests</a></li><li><a href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.7-Deployment_with_Heroku.html">0.6.7 Deployment with Heroku</a></li></ul></details></ul></details><details><summary>Module 1</summary><ul><details><summary>Unit 1 Agile user requirements</summary><ul><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.1-Introduction_to_Agile.html">1.1.1 Introduction to Agile</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.2-Personas.html">1.1.2 Personas</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.3-User_Stories.html">1.1.3 User Stories</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.4-Requirements.html">1.1.4 Requirements</a></li><li><a href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.5-Next_Steps.html">1.1.5 Next Steps</a></li></ul></details><details><summary>Unit 2 Designing UI</summary><ul><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.1-Usability_heuristics.html">1.2.1 Usability heuristics</a></li><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.2-Composition_and_components_in_design.html">1.2.2 Composition and components in design</a></li><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.3-Prototyping_UI.html">1.2.3 Prototyping UI</a></li><li><a href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.4-Next_Steps.html">1.2.4 Next Steps</a></li></ul></details><details><summary>Unit 3 Building UI with React</summary><ul><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.1-Getting_started_with_React.html">1.3.1 Getting started with React</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.2-React_methods_and_computed_properties.html">1.3.2 React methods and computed properties</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.7-Integrating_Redux_for_global_state_management.html">1.3.7 Integrating Redux for global state management</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 3 Building UI with Vue.js</summary><ul><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.1-Getting_started_with_the_Vue_CDN.html">1.3.1 Getting started with the Vue CDN</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.2-Vue_methods_and_computed_properties.html">1.3.2 Vue methods and computed properties</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.7-Integrating_Vuex_for_global_state_management.html">1.3.7 Integrating Vuex for global state management</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 4 Accessibility</summary><ul><li><a href="/curriculum/Module-1/Unit-4-Accessibility/1.4.1-Inclusive_design.html">1.4.1 Inclusive design</a></li><li><a href="/curriculum/Module-1/Unit-4-Accessibility/1.4.2-Accessibility.html">1.4.2 Accessibility</a></li><li><a href="/curriculum/Module-1/Unit-4-Accessibility/1.4.3-Next_Steps.html">1.4.3 Next Steps</a></li></ul></details><details><summary>Unit 5 End to end testing</summary><ul><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.1-End_to_end_testing.html">1.5.1 End to end testing</a></li><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.2-End_to_end_testing_with_Cypress.html">1.5.2 End to end testing with Cypress</a></li><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.3-Adding_more_test_coverage.html">1.5.3 Adding more test coverage</a></li><li><a href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.4-Test_cases_and_equivalence_testing.html">1.5.4 Test cases and equivalence testing</a></li></ul></details></ul></details><details><summary>Module 2</summary><ul><details><summary>Unit 1 Securing APIs with Basic Auth</summary><ul><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.1-RESTful_APIs_and_Frameworks.html">2.1.1 RESTful APIs and Frameworks</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.2-MOVE_TO_BOOTCAMP.html">2.1.2 MOVE TO BOOTCAMP</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.2-Password_Hashing.html">2.1.2 Password Hashing</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.3-Implementing_Basic_Auth.html">2.1.3 Implementing Basic Auth</a></li><li><a href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.4-Limitations_of_Basic_Auth.html">2.1.4 Limitations of Basic Auth</a></li></ul></details><details><summary>Unit 2 Securing APIs with OAuth and OpenID Connect</summary><ul><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.1-Introduction_to_OAuth.html">2.2.1 Introduction to OAuth</a></li><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.1-MOVE-Sessions.html">2.2.1 MOVE Sessions</a></li><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.2-Securing_APIs_with_OAuth.html">2.2.2 Securing APIs with OAuth</a></li><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.3-OpenID_Connect.html">2.2.3 OpenID Connect</a></li><li><a href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.4-Module_2_assessment.html">2.2.4 Module 2 assessment</a></li></ul></details></ul></details><details><summary>Module 3</summary><ul><details><summary>Unit 1 The SDLC</summary><ul><li><a href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.1-The_Software_Development_Life_Cycle.html">3.1.1 The Software Development Life Cycle</a></li><li><a href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.2-The_roles_and_responsibilities_in_the_SDLC_with_communication.html">3.1.2 The roles and responsibilities in the SDLC with communication</a></li><li><a href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.3-Communication_in_your_teams.html">3.1.3 Communication in your teams</a></li></ul></details><details><summary>Unit 2 The 7 Princibles of Testing</summary><ul><li><a href="/curriculum/Module-3/Unit-2-The-7-Princibles-of-Testing/3.2.1-The_7_Princibles_of_Testing.html">3.2.1 The 7 Princibles of Testing</a></li><li><a href="/curriculum/Module-3/Unit-2-The-7-Princibles-of-Testing/3.2.2-Continuous_Deployment.html">3.2.2 Continuous Deployment</a></li></ul></details><details><summary>Unit 3 Deployment and Maintenance</summary><ul><li><a href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.1-Containerisation_with_docker.html">3.3.1 Containerisation with docker</a></li><li><a href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.2-Introduction_to_Cloud_Computing.html">3.3.2 Introduction to Cloud Computing</a></li><li><a href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.3-Monitoring_and_Maintenance.html">3.3.3 Monitoring and Maintenance</a></li></ul></details></ul></details><details><summary>Module 4</summary><ul><details><summary>Unit 1 Open Web Application Security Project</summary><ul><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.1-Introduction_to_the_OWASP_Top_Ten.html">4.1.1 Introduction to the OWASP Top Ten</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.2-Injection_Attacks.html">4.1.2 Injection Attacks</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.3-Broken_Authentication.html">4.1.3 Broken Authentication</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.3-Exposing_Sensitive_Data.html">4.1.3 Exposing Sensitive Data</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.4-Monitoring_for_attacks.html">4.1.4 Monitoring for attacks</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.5-The_role_of_a_Penetration_Tester.html">4.1.5 The role of a Penetration Tester</a></li><li><a href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.6-Next_Steps.html">4.1.6 Next Steps</a></li></ul></details></ul></details></ul></nav>
        <h1>Integrating Vuex</h1>
<p>Now we have introduced the Product Details page, we need a way to access that Product's information so we can display it on the frontend. The problem is, passing the whole product via the router link won't work and is not a scaleable approach.</p>
<p>Instead, we need a central place to manage the data state and to give the Product Details component the ability to query the state based on the dynamic ID we pass in the URL.</p>
<h2>Learning Objectives</h2>
<ul>
<li>Re-imagine our app using Vuex</li>
<li>Query product information by Product ID</li>
<li>Display Product information on the Product Details page</li>
</ul>
<h2>Re-imagining our app using Vuex</h2>
<p>Let's first visualise how the Vuex store will fit in to our project:</p>
<p><img src="https://raw.githubusercontent.com/MultiverseLearningProducts/curriculum/a9c756c36ecf6103467d1afb82495bc0cecb198f/assets/images/mod1_vuex.svg" alt="Module 1 - Vuex store" title="Module 1 - Vuex store"></p>
<p>Key points:</p>
<ul>
<li>Components can get and receive returned data from the store using <code>getters</code></li>
<li>Components can <code>commit</code> updates to the store to make changes to the data</li>
<li>Components can still have their own local state</li>
</ul>
<h2>Vuex installation and configuration</h2>
<h3>Step 1</h3>
<p>In your <code>index.html</code> file, add the following script tag above <code>main.js</code>:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot; https://unpkg.com/vuex@3.6.2/dist/vuex.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3>Step 2</h3>
<p>Add three new objects:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> products = {
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">products</span>: [
      {
        <span class="hljs-attr">productId</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Boston Fern&#x27;</span>,
        <span class="hljs-attr">description</span>:
          <span class="hljs-string">&#x27;Nephrolepis exaltata, known as the sword fern or Boston fern, is a species of fern in the family Lomariopsidaceae native to tropical regions throughout the world.&#x27;</span>,
        <span class="hljs-attr">features</span>: [<span class="hljs-string">&#x27;Moisture loving&#x27;</span>, <span class="hljs-string">&#x27;Easy care&#x27;</span>, <span class="hljs-string">&#x27;Dislikes direct sun&#x27;</span>],
        <span class="hljs-attr">stockLevel</span>: <span class="hljs-number">5</span>,

        <span class="hljs-comment">// add rest of product JSON here</span>
      },
    ],
  },
  <span class="hljs-attr">getters</span>: {},
};
</code></pre>
<pre><code class="language-js"><span class="hljs-keyword">const</span> cart = {
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">cart</span>: [],
  },
  <span class="hljs-attr">mutations</span>: {},
  <span class="hljs-attr">getters</span>: {},
};
</code></pre>
<pre><code class="language-js"><span class="hljs-keyword">const</span> business = {
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">brand</span>: <span class="hljs-string">&#x27;Plants Direct&#x27;</span>,
    <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;21 Sussex Gardens&#x27;</span>,
    <span class="hljs-attr">city</span>: <span class="hljs-string">&#x27;London&#x27;</span>,
    <span class="hljs-attr">postcode</span>: <span class="hljs-string">&#x27;SW1 01L&#x27;</span>,
  },
  <span class="hljs-attr">getters</span>: {},
};
</code></pre>
<h3>Step 3</h3>
<p>Create a new Vuex store and pass in the modules you created above:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Vuex.Store({
  <span class="hljs-attr">modules</span>: {
    products,
    cart,
    business,
  },
});
</code></pre>
<h3>Step 4</h3>
<p>Pass the store into your app component:</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> app = <span class="hljs-keyword">new</span> Vue({
  router,
  store,
  <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,

  <span class="hljs-comment">// other fields omitted</span>
</code></pre>
<h3>Step 5</h3>
<p>Remove <code>{{this.cart.length}}</code> from the home page.</p>
<h3>Step 6</h3>
<p>Verify your site is now loading. It won't show any products or other information just yet. We'll fix this below.</p>
<h2>Configuring components to use Vuex store</h2>
<p>As you'll know, all of our components use data from the main app component, but now we want to change this so they get the data from our newly created store. Let's fix the issues one by one:</p>
<h3>Fixing the footer brand and address</h3>
<h4>Step 1</h4>
<p>In the business module, add the following getters:</p>
<pre><code class="language-js"><span class="hljs-comment">// Business module</span>

<span class="hljs-attr">getters</span>: {
  <span class="hljs-function"><span class="hljs-title">getFullAddress</span>(<span class="hljs-params">state</span>)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${state.address}</span>, <span class="hljs-subst">${state.city}</span>, <span class="hljs-subst">${state.postcode}</span>`</span>;
  },
  <span class="hljs-function"><span class="hljs-title">getBrand</span>(<span class="hljs-params">state</span>)</span> {
    <span class="hljs-keyword">return</span> state.brand;
  },
},
</code></pre>
<p>The <code>state</code> parameter here is somewhat abstract as we don't actually pass in the state when using the getter methods. In this instance, it refers to the current data state of the store.</p>
<h4>Step 2</h4>
<p>In your app component, modify the computed methods as follows:</p>
<pre><code class="language-js"><span class="hljs-comment">// app component</span>

<span class="hljs-attr">computed</span>: {
  <span class="hljs-function"><span class="hljs-title">footerCopyrightNotice</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;2021 &#x27;</span> + store.getters.getBrand;
  },
  <span class="hljs-function"><span class="hljs-title">footerAddress</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Our address: &#x27;</span> + store.getters.getFullAddress;
  },
},
</code></pre>
<p>This should fix the footer output.</p>
<h3>How do getters work?</h3>
<p>In order to access our store, we now need to use <code>getter</code> methods that we create in the store modules. These methods can only read from the store, and can't modify or update it. In this case, <code>getBrand</code> and <code>getFullAddress</code> belong to the business module and return the brand name and the address.</p>
<p>We'll be using this getter pattern a good deal to fix the other data issues, so take a moment to review your changes to understand how it works.</p>
<h3>Fixing the products display</h3>
<p>Currently our products aren't displaying. This is because the Home component needs to grab them from the store and pass them down to the Product component to render them.</p>
<h4>Step 1</h4>
<p>Head to your <code>index.html</code> file and remove everything from router view:</p>
<pre><code class="language-html"><span class="hljs-comment">&lt;!-- index.html -- &gt;

&lt;router-view /&gt;
</span></code></pre>
<h4>Step 2</h4>
<p>Next up, add the <code>getNProducts</code> method to the Product store's getters object. This will allow us to get <em>n</em> number of properties for display on the home page:</p>
<pre><code class="language-js"><span class="hljs-comment">// Product store</span>

<span class="hljs-attr">getters</span>: {
  <span class="hljs-attr">getNProducts</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> state.products.filter(<span class="hljs-function">(<span class="hljs-params">element, index</span>) =&gt;</span> index &lt; n);
  },
},
</code></pre>
<h4>Step 3</h4>
<p>Add a method to the Home component to get the products and use this in the template to loop through each product. Also, while you're there, remove the <code>add-to-cart</code> event as we'll no longer need it.</p>
<pre><code class="language-js"><span class="hljs-comment">// Home component</span>

<span class="hljs-attr">methods</span>: {
  <span class="hljs-function"><span class="hljs-title">getProducts</span>(<span class="hljs-params">n</span>)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$store.getters.getNProducts(n);
  },
},
</code></pre>
<pre><code class="language-html"><span class="hljs-comment">&lt;!-- Home component --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">product</span>
  <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;product in getProducts(3)&quot;</span>
  <span class="hljs-attr">v-bind:key</span>=<span class="hljs-string">&quot;product.productId&quot;</span>
  <span class="hljs-attr">v-bind:product</span>=<span class="hljs-string">&quot;product&quot;</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">product</span>&gt;</span>
</code></pre>
<h4>Step 4</h4>
<p>Don't forget to remove the event from the router link in the Product component:</p>
<pre><code class="language-js"><span class="hljs-comment">// Product component</span>

&lt;router-link
  v-bind:to=<span class="hljs-string">&quot;{ name: &#x27;productDetails&#x27;, params: {productId: product.productId} }&quot;</span>
  v-on:add-to-cart=<span class="hljs-string">&quot;addToCart&quot;</span> <span class="hljs-comment">// remove this line</span>
  <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;anchor--button&quot;</span>
&gt;&lt;/router-link&gt;
</code></pre>
<h4>Step 5</h4>
<p>Remove the <code>updateCart</code> method for now:</p>
<pre><code class="language-js"><span class="hljs-comment">// Product component</span>

<span class="hljs-comment">// remove this method</span>
<span class="hljs-function"><span class="hljs-title">updateCart</span>(<span class="hljs-params">productId</span>)</span> {
  <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;update-cart&#x27;</span>, productId);
},
</code></pre>
<p>This should now load the products onto the home page.</p>
<h3>Fixing the Add to cart button</h3>
<p>Currently the text changes on the Product's 'Add to cart' button, but we're not committing anything to the store and changing the cart.</p>
<h4>Step 1</h4>
<p>Cut the <code>updateCart</code> method from your app component and move it to the Cart modules's mutations object. This is the same solution you wrote for the coding challenge that adds/removes a Product ID from the cart.</p>
<p>It could look something like:</p>
<pre><code class="language-js"><span class="hljs-comment">// Cart module</span>

<span class="hljs-attr">mutations</span>: {
  <span class="hljs-function"><span class="hljs-title">updateCart</span>(<span class="hljs-params">state, productId</span>)</span> {
    <span class="hljs-keyword">if</span> (!state.cart.includes(productId)) {
      <span class="hljs-keyword">return</span> state.cart.push(productId);
    }
    state.cart.splice(state.cart.indexOf(productId), <span class="hljs-number">1</span>);
  },
},
</code></pre>
<p>Be sure to remove the empty methods object from your app component.</p>
<h4>Step 2</h4>
<p>In your Product component, replace the <code>addToCart</code> method with the following version:</p>
<pre><code class="language-js"><span class="hljs-comment">// Product component</span>

<span class="hljs-function"><span class="hljs-title">addToCart</span>(<span class="hljs-params">product</span>)</span> {
  product.addedToCart = !product.addedToCart;
  <span class="hljs-built_in">this</span>.$store.commit(<span class="hljs-string">&#x27;updateCart&#x27;</span>, product.productId);
},
</code></pre>
<p>Here we perform the NOT trick on the product then we use <code>commit</code> to commit the change to the store by passing the event name and the new value.</p>
<h4>Step 3</h4>
<p>Replace the cart length code in the header with:</p>
<pre><code class="language-html"><span class="hljs-comment">&lt;!-- index.html --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cart&quot;</span>&gt;</span>Cart ({{$store.getters.getCartLength}})<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>The <code>$store</code> object is an object Vue exposes so we can query getters from a page such as the index page.</p>
<p>This should be enough to get your cart up and running again!</p>
<h3>Fixing the Property detail content</h3>
<p>The penultimate fix to get Vuex fully up and running is to get the Product Details to show up on the Product page. To do this, we'll use the dynamic ID we are passing via the router link to find the product by ID in the store. We'll then add this product to the local state via a lifecycle method so we can output the details. Let's go through it bit by bit:</p>
<h4>Step 1</h4>
<p>Firstly, add the method to find a product by ID to the Product module's getter methods object:</p>
<pre><code class="language-js"><span class="hljs-comment">// Product module</span>

<span class="hljs-attr">getters</span>: {
  <span class="hljs-attr">getNProducts</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> state.products.filter(<span class="hljs-function">(<span class="hljs-params">element, index</span>) =&gt;</span> index &lt; n);
  },
  <span class="hljs-attr">getProduct</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">productId</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> state.products.find(
      <span class="hljs-function">(<span class="hljs-params">product</span>) =&gt;</span> product.productId === <span class="hljs-built_in">parseInt</span>(productId)
    );
  },
},
</code></pre>
<p>This is quirky construct like the <code>getNProducts</code> function that is a function that returns a function that returns the results of the find method. We need this in order for the state and the <code>productId</code> to be passed in.</p>
<h4>Step 2</h4>
<p>Next, we need to use the <code>mounted</code> lifecycle method to call the method we created above. We then assign the results to the local data state. We use <code>this.$route.params.productId</code>, which is another handy object Vue exposes that allows us to get the Product ID that we specified in the router link in Part 6.</p>
<pre><code class="language-js"><span class="hljs-comment">// Main.js</span>

<span class="hljs-keyword">const</span> ProductDetails = Vue.component(<span class="hljs-string">&#x27;Product-Details&#x27;</span>, {
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    // Template omitted
  `</span>,
  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">product</span>: {},
    };
  },
  <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">this</span>.product = <span class="hljs-built_in">this</span>.$store.getters.getProduct(<span class="hljs-built_in">this</span>.$route.params.productId);
  },
});
</code></pre>
<p>A lifecycle method is a group of events that fire at predictable times during the creation of a Vue component. In our case, the <code>mounted</code> method can be used to request data once the component has been mounted (added) to the DOM.</p>
<h4>Step 3</h4>
<p>The last step is to add in some methods to add the product to cart and to fetch the second image in the images array:</p>
<pre><code class="language-js"><span class="hljs-comment">// Product Details component</span>

<span class="hljs-attr">methods</span>: {
  <span class="hljs-function"><span class="hljs-title">getImage</span>(<span class="hljs-params">product</span>)</span> {
    <span class="hljs-keyword">return</span> product.images[<span class="hljs-number">1</span>].imageSrc;
  },
  <span class="hljs-function"><span class="hljs-title">addToCart</span>(<span class="hljs-params">product</span>)</span> {
    product.addedToCart = !product.addedToCart;
    <span class="hljs-built_in">this</span>.$store.commit(<span class="hljs-string">&#x27;updateCart&#x27;</span>, product.productId);
  },
},
</code></pre>
<p>You should now see the Product Details and be able to add/remove the product to/from the cart! In addition, the state should hold when you return to the home page. Add the product to the cart, return home, and you should still see the item in the cart. You should also see that the product's 'Add to cart' button has changed to 'Remove from cart'.</p>
<h2>Assignment - Coding challenge</h2>
<p>You may notice that there's an error in the console on the Property Details page:</p>
<pre><code>vue:<span class="hljs-number">6</span> TypeError: Cannot read property <span class="hljs-string">&#x27;1&#x27;</span> of undefined
    at <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.getImage</span> (<span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">234</span>)
</code></pre>
<ol>
<li><p>Why is this error being thrown yet the image still loads?</p></li>
<li><p>How can you fix it?</p></li>
</ol>

        <script src="/curriculum/js/tabbed-code-blocks.js"></script>
        <script>
            function toggleNav() {
                const button = document.getElementById('navigation-toggle')
                const isAriaExp = button.getAttribute('aria-expanded')
                const newAriaExp = (isAriaExp == "false") ? "true" : "false"
                button.setAttribute('aria-expanded', newAriaExp)
                const nav = document.getElementById('navigation')
                nav.style.display = nav.offsetParent ? 'none' : 'block'
            }
        </script>
    </body>
</html>
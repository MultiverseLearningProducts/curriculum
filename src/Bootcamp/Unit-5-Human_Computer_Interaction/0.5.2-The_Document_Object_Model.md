# The Document Object Model (DOM)

The document object model is the data structure that a browser reads to display content in a browser. Often referred to as the DOM it is a data structure that includes data we see in the `<body>` tag and data we don't see in the `<head>` tag.

## The DOM tree

The document is a tree like structure. The root of the tree structure is the `<html>` tag. Tags throughout the document have an opening and closing parts. They are pairs with the opening tag enclosed by angle brackets and the closing tag enclosed by angle brackets and a leading 'forward slash'. This is also called a node.

```html
<html></html>
```

Nodes have 'children'. The `<html>` tag has 2 children: `<head>` and `<body>`. A node has children by enclosing them between its opening and closing tags. A node can have children, and those children can have children. Eventually a node will have content.

```html
<html>
    <head>
        <title>Example Content</title>
    </head>
    <body>
        <h1>Example Heading</h1>
        <button disabled="true" type="submit">Click Me</button>
    </body>
</html>
```
The great power of XML like structures of which HTML is an example is the way additional attributes can be added to the node. In the example above the `<button>` element has content; the text "Click Me" and 2 attributes, a `type` attribute that makes it a submit button, and a `disabled` attribute that prevents the button being clickable. These html attributes are key value pairs (key="value") and they are added to the opening tag.

It is very helpful to have this mental picture of the DOM as a tree. You can explore HTML documents for yourself, add the 'DOM node tree viewer' extention to chrome and you'll be able to export the DOM on any site you visit. Below is the `http://multiverse.io` site.

![a visual example of the DOM tree structure](https://user-images.githubusercontent.com/4499581/116584924-c6368f00-a90f-11eb-8e72-df90c8360434.png)

## Accessing the DOM with JS

When we write HTML we are constructing this tree. Once it is loaded in the browser we can programmatically access this tree structure using Javascript. The first thing to learn is how to get our javascript running in the browser along side the DOM.

### Loading JS in the browser

There are 3 ways to write javascript and have it run in the browser.

1. inline
2. in a `<script>` tag
3. using `src` attribute

#### Inline

You can write javascript as a value for some HTML attributes. For example you can write javascript to handle a `onclick` event:

```html
<button id="JS-test-id" type="button" onclick="event => {console.info(event.target.id)}">Test JS</button>
```

This HTML element will be rendered with an event listener listening for the 'click' event on the button, we have also provided a line of javascript code for that handler to run - it should log in the console the id of the element that was just clicked - `JS-test-id`. The `event` object you see above is injected by the browser.

#### script tag

You can open a `<script>` tag and inside this tag write javascript. This block of javascript code is run once when the page loads.

```html
<script>
    const socket = new Websocket('ws://localhost:3000/')
    socket.on('message', msg => {
        renderChatMessage(msg.data)
    })
</script>
```

#### from a source

You can also write your javascript in a file, and include the file by creating a `<script>` tag that references the files URL as a value to its `src` attribute.

```html
<script src="http://localhost:3000/js/main.js"></script>
```
The content of the file becomes the content of the `<script>` tag and is executed when the file loads.

### Reference the DOM in javascript

Javascript that runs in the browser will be able to reference other javascript objects that are injected into the global scope by the browser. For example the `document` object.

We can write code that uses functions that are properties of this globally scoped object. Global scope means this object can be referenced by any of your code any where in your code.

Lets create a programmatic reference to a DOM node based on it's id:

```javascript
const element = document.getElementById('JS-test-id')
```
I now have a reference to a DOM element. I can effect it:
```javascript
element.classList.add('active')
```
That code just added the following (look at the last attribute):
```html
<button id="JS-test-id" type="button" onclick="event => {console.info(event.target.id)}" class="active">Test JS</button>
```
Changed your mind?
```javascript
element.classList.remove('active')
```

There is a very extensive API on the `document` object. For our purposes we want to do the following: Create, read, update and delete.
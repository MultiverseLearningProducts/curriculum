<!DOCTYPE html>
<html lang="en-GB">

<head>
    <meta charset="utf-8">
    <title>
         Asynchronous JavaScript
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="/curriculum/favicon.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/an-old-hope.min.css">
    <link rel="stylesheet" href="/curriculum/style.css" />
    <script src="/curriculum/js/highlight.min.js"></script>
    <script src="/curriculum/js/bash.min.js"></script>
    <script src="/curriculum/js/java.min.js"></script>
    <script src="/curriculum/js/javascript.min.js"></script>
    <script src="/curriculum/js/sql.min.js"></script>
</head>

<body>
    <button id="navigation-toggle" aria-expanded="false" aria-haspopup="true" onclick="toggleNav()"
        onkeydown="event => {event.keyCode === 13 ? toggleNav() : null}" tabindex="1">Table of contents</button>
    <nav id="navigation"><ul><details><summary>Bootcamp</summary><ul><details><summary>Unit 1 Object Oriented Programming</summary><ul><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.0-UML_Modelling.html">0.1.0 UML Modelling</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.1-JavaScript_Objects_And_Functions.html">0.1.1 JavaScript Objects And Functions</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.2-Test_Driven_Development.html">0.1.2 Test Driven Development</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.3-Objects_in_an_Airport_Domain.html">0.1.3 Objects in an Airport Domain</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.4-Static_functions_and_properties.html">0.1.4 Static functions and properties</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.5-Inheritance.html">0.1.5 Inheritance</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.7-OOP_Challenge.html">0.1.7 OOP Challenge</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-1-Object_Oriented_Programming\0.1.8-End_of_Unit_Quiz_OOP.html">0.1.8 End of Unit Quiz OOP</a></li></ul></details><details><summary>Unit 2 Asynchronous JavaScript</summary><ul><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.1-Asynchronous_JavaScript.html">0.2.1 Asynchronous JavaScript</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.2-Promises.html">0.2.2 Promises</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.3-Asynchronous_Airport_Data_Load.html">0.2.3 Asynchronous Airport Data Load</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-2-Asynchronous_JavaScript\0.2.4-End_of_Unit_Quiz_Async.html">0.2.4 End of Unit Quiz Async</a></li></ul></details><details><summary>Unit 3 Relational Databases</summary><ul><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.2-Introduction_to_Databases.html">0.3.2 Introduction to Databases</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.3-Basic_SQL_Commands.html">0.3.3 Basic SQL Commands</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.4-SQL_Joins.html">0.3.4 SQL Joins</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.5-Database_access_using_Node.html">0.3.5 Database access using Node</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.6-Populating_databases_from_JSON.html">0.3.6 Populating databases from JSON</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.7-Object_Relational_Mapping_part_1.html">0.3.7 Object Relational Mapping part 1</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.8-Object_Relational_Mapping_part_2.html">0.3.8 Object Relational Mapping part 2</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.9a-Sequelize_part_1.html">0.3.9a Sequelize part 1</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.9b-Sequelize_part_2.html">0.3.9b Sequelize part 2</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-3-Relational_Databases\0.3.9c-End_of_Unit_Quiz_Databases.html">0.3.9c End of Unit Quiz Databases</a></li></ul></details><details><summary>Unit 4 RESTful Servers</summary><ul><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.1-Web_Servers.html">0.4.1 Web Servers</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.2-Application_Servers.html">0.4.2 Application Servers</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.3-Postman.html">0.4.3 Postman</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.4-Route_Parameters.html">0.4.4 Route Parameters</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.5-CRUD_operations.html">0.4.5 CRUD operations</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.6-Server_side_Validation.html">0.4.6 Server side Validation</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-4-RESTful_Servers\0.4.7-End_of_Unit_Quiz_RESTful.html">0.4.7 End of Unit Quiz RESTful</a></li></ul></details><details><summary>Unit 5 Human Computer Interaction</summary><ul><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.1-Human_Computer_Interaction.html">0.5.1 Human Computer Interaction</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.2-Server_Side_Rendering.html">0.5.2 Server Side Rendering</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.3-The_Document_Object_Model.html">0.5.3 The Document Object Model</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.4-HTML_forms_and_lists.html">0.5.4 HTML forms and lists</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-5-Human_Computer_Interaction\0.5.5-End_of_Unit_Quiz_HCI.html">0.5.5 End of Unit Quiz HCI</a></li></ul></details><details><summary>Unit 6 End Of Bootcamp Group Project</summary><ul><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.1-Introduction.html">0.6.1 Introduction</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.2-Requirements.html">0.6.2 Requirements</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.3-Agile_Development.html">0.6.3 Agile Development</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.4-Design.html">0.6.4 Design</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.5-GitHub_Projects.html">0.6.5 GitHub Projects</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.6-Branching_and_Pull_Requests.html">0.6.6 Branching and Pull Requests</a></li><li><a class="nav-link" href="/curriculum\Bootcamp\Unit-6-End_Of_Bootcamp_Group_Project\0.6.7-Deployment_with_Heroku.html">0.6.7 Deployment with Heroku</a></li></ul></details></ul></details><details><summary>Module 1</summary><ul><details><summary>Unit 1 Agile user requirements</summary><ul><li><a class="nav-link" href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.1-Introduction_to_Agile.html">1.1.1 Introduction to Agile</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.2-Personas.html">1.1.2 Personas</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.3-Requirements.html">1.1.3 Requirements</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.4-User_Stories.html">1.1.4 User Stories</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-1-Agile_user_requirements\1.1.5-Next_Steps.html">1.1.5 Next Steps</a></li></ul></details><details><summary>Unit 2 Designing UI</summary><ul><li><a class="nav-link" href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.1-Usability_heuristics.html">1.2.1 Usability heuristics</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.2-Composition_and_components_in_design.html">1.2.2 Composition and components in design</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.3-Prototyping_UI.html">1.2.3 Prototyping UI</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-2-Designing_UI\1.2.4-Next_Steps.html">1.2.4 Next Steps</a></li></ul></details><details><summary>Unit 3 Building UI with React</summary><ul><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.1-Getting_started_with_React.html">1.3.1 Getting started with React</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.2-React_methods_and_computed_properties.html">1.3.2 React methods and computed properties</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.7-Integrating_Redux_for_global_state_management.html">1.3.7 Integrating Redux for global state management</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_React\1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 3 Building UI with Vue.js</summary><ul><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.1-Getting_started_with_the_Vue_CDN.html">1.3.1 Getting started with the Vue CDN</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.2-Vue_methods_and_computed_properties.html">1.3.2 Vue methods and computed properties</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.7-Integrating_Vuex_for_global_state_management.html">1.3.7 Integrating Vuex for global state management</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-3-Building_UI_with_Vue.js\1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 4 Accessibility</summary><ul><li><a class="nav-link" href="/curriculum\Module-1\Unit-4-Accessibility\1.4.1-Inclusive_design.html">1.4.1 Inclusive design</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-4-Accessibility\1.4.2-Accessibility.html">1.4.2 Accessibility</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-4-Accessibility\1.4.3-Next_Steps.html">1.4.3 Next Steps</a></li></ul></details><details><summary>Unit 5 End to end testing</summary><ul><li><a class="nav-link" href="/curriculum\Module-1\Unit-5-End_to_end_testing\1.5.1-End_to_end_testing.html">1.5.1 End to end testing</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-5-End_to_end_testing\1.5.2-End_to_end_testing_with_Cypress.html">1.5.2 End to end testing with Cypress</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-5-End_to_end_testing\1.5.3-Adding_more_test_coverage.html">1.5.3 Adding more test coverage</a></li><li><a class="nav-link" href="/curriculum\Module-1\Unit-5-End_to_end_testing\1.5.4-Test_cases_and_equivalence_testing.html">1.5.4 Test cases and equivalence testing</a></li></ul></details></ul></details><details><summary>Module 2</summary><ul><details><summary>Unit 1 Securing APIs with Basic Auth</summary><ul><li><a class="nav-link" href="/curriculum\Module-2\Unit-1-Securing_APIs_with_Basic_Auth\2.1.1-RESTful_APIs_and_Frameworks.html">2.1.1 RESTful APIs and Frameworks</a></li><li><a class="nav-link" href="/curriculum\Module-2\Unit-1-Securing_APIs_with_Basic_Auth\2.1.2-Password_Hashing.html">2.1.2 Password Hashing</a></li><li><a class="nav-link" href="/curriculum\Module-2\Unit-1-Securing_APIs_with_Basic_Auth\2.1.3-Implementing_Basic_Auth.html">2.1.3 Implementing Basic Auth</a></li><li><a class="nav-link" href="/curriculum\Module-2\Unit-1-Securing_APIs_with_Basic_Auth\2.1.4-Limitations_of_Basic_Auth.html">2.1.4 Limitations of Basic Auth</a></li></ul></details><details><summary>Unit 2 Securing APIs with OAuth and OpenID Connect</summary><ul><li><a class="nav-link" href="/curriculum\Module-2\Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect\2.2.1-Introduction_to_OAuth.html">2.2.1 Introduction to OAuth</a></li><li><a class="nav-link" href="/curriculum\Module-2\Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect\2.2.2-Securing_APIs_with_OAuth.html">2.2.2 Securing APIs with OAuth</a></li><li><a class="nav-link" href="/curriculum\Module-2\Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect\2.2.3-OpenID_Connect.html">2.2.3 OpenID Connect</a></li><li><a class="nav-link" href="/curriculum\Module-2\Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect\2.2.4-Module_2_assessment.html">2.2.4 Module 2 assessment</a></li></ul></details></ul></details><details><summary>Module 3</summary><ul><details><summary>Unit 1 The SDLC</summary><ul><li><a class="nav-link" href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.0-Introduction_to_module_3.html">3.1.0 Introduction to module 3</a></li><li><a class="nav-link" href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.1-The_Software_Development_Life_Cycle.html">3.1.1 The Software Development Life Cycle</a></li><li><a class="nav-link" href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.2-The_roles_and_responsibilities_in_the_SDLC_with_communication.html">3.1.2 The roles and responsibilities in the SDLC with communication</a></li><li><a class="nav-link" href="/curriculum\Module-3\Unit-1-The-SDLC\3.1.3-Communication_in_your_teams.html">3.1.3 Communication in your teams</a></li></ul></details><details><summary>Unit 2 The 7 Princibles of Testing</summary><ul><li><a class="nav-link" href="/curriculum\Module-3\Unit-2-The-7-Princibles-of-Testing\3.2.1-The_7_Princibles_of_Testing.html">3.2.1 The 7 Princibles of Testing</a></li><li><a class="nav-link" href="/curriculum\Module-3\Unit-2-The-7-Princibles-of-Testing\3.2.2-Continuous_Deployment.html">3.2.2 Continuous Deployment</a></li></ul></details><details><summary>Unit 3 Deployment and Maintenance</summary><ul><li><a class="nav-link" href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance\3.3.1-Introduction_to_Unix.html">3.3.1 Introduction to Unix</a></li><li><a class="nav-link" href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance\3.3.2-Introduction_to_containerisation.html">3.3.2 Introduction to containerisation</a></li><li><a class="nav-link" href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance\3.3.3-Introduction_to_Cloud_Computing.html">3.3.3 Introduction to Cloud Computing</a></li><li><a class="nav-link" href="/curriculum\Module-3\Unit-3-Deployment-and-Maintenance\3.3.4-Monitoring_and_Maintenance.html">3.3.4 Monitoring and Maintenance</a></li></ul></details></ul></details><details><summary>Module 4</summary><ul><details><summary>Unit 1 Open Web Application Security Project</summary><ul><li><a class="nav-link" href="/curriculum\Module-4\Unit-1-Open_Web_Application_Security_Project\4.1.1-OWASP.html">4.1.1 OWASP</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-1-Open_Web_Application_Security_Project\4.1.2-Juice_Shop.html">4.1.2 Juice Shop</a></li></ul></details><details><summary>Unit 2 OWASP Top 10</summary><ul><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.1-Broken_Access_Control.html">4.2.1 Broken Access Control</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.10-Server_Side_Request_Forgery.html">4.2.10 Server Side Request Forgery</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.2-Cryptographic_Failure.html">4.2.2 Cryptographic Failure</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.3-Injection.html">4.2.3 Injection</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.4-Insecure_Design.html">4.2.4 Insecure Design</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.5-Security_Misconfiguration.html">4.2.5 Security Misconfiguration</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.6-Vulnerable_Components.html">4.2.6 Vulnerable Components</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.7-Identification_and_Authentication_Failures.html">4.2.7 Identification and Authentication Failures</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.8-Software_and_Data_Integrity_Failures.html">4.2.8 Software and Data Integrity Failures</a></li><li><a class="nav-link" href="/curriculum\Module-4\Unit-2-OWASP_Top_10\4.2.9-Security_Logging_and_Monitoring_Failures.html">4.2.9 Security Logging and Monitoring Failures</a></li></ul></details></ul></details></ul></nav>
    <h1>Asynchronous JavaScript</h1>
<h2>Lesson</h2>
<p>JavaScript is a single threaded language. This means it has one call stack (where code is executed) and one memory heap (where objects are stored). JavaScript executes code in order and must finish executing a piece of code before moving onto the next. We call this <strong>synchronous</strong>, or blocking, execution. Other languages such as C++ and Java are multi-threaded and can execute multiple pieces of code at the same time. We refer to this as <strong>asynchronous</strong> or non-blocking execution.</p>
<h3>What is the Call Stack?</h3>
<p>The call stack is a data structure in the runtime of javascript that functions to organise the running or 'execution' of your code.</p>
<p><figure><img src="https://miro.medium.com/max/1280/0*SESFJYWU5a-3XM9m.gif" alt="an animation of a stack"><figcaption></figcaption></figure></p>
<p>Last on first off. Imagine a stick over which you can place hoops. To get to the bottom hoop, all the other hoops have to come off first.</p>
<p><figure><img src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=B000U02LXY&amp;Format=_SL250_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=toy-ideas-20&amp;language=en_US" alt="stack of hoops"><figcaption></figcaption></figure>.</p>
<h3>How does JavaScript use the Call Stack?</h3>
<p>Lets take the following code example:</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a * b
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">return</span> multiply(n, n)
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printSquare</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">const</span> result = square(n)
    <span class="hljs-built_in">console</span>.log(result)
}

printSquare(<span class="hljs-number">4</span>)
</code></pre>
<p>Read the code above. First of all there are 3 function definitions, then one of those functions is called. When <code>printSquare</code> is called it is put onto the stack. <code>printSquare</code> is evaluated and calls <code>square</code> which is added to the stack, <code>square</code> calls <code>multiply</code> which is added to the stack. <code>multiply</code> does not call any other function so it returns the value 16. the <code>return</code> keyword means that function pops off the stack, now inside <code>square</code> that function is evaluated to 16, and returns so <code>square</code> is then popped off the stack. Now back in <code>printSquare</code> the called to <code>square</code> is evaluated and assigned in memory to the variable <code>result</code>. Next line console.log is called with 16 and the function implicitly returns (without a value) as there is nothing more to execute. See below:</p>
<p><figure><img src="https://user-images.githubusercontent.com/4499581/93218919-af697080-f762-11ea-8a8b-f2ab1b39b4fb.gif" alt="call stack"><figcaption></figcaption></figure></p>
<p><a href="http://latentflip.com/loupe">Loupe</a> is a little visualisation to help you understand how JavaScript's call stack/event loop/callback queue interact with each other) is a tool which helps you visualise how JavaScripts Call Stack, Event Loop and Callback Queue interact with each other.</p>
<p>Open up this <a href="http://latentflip.com/loupe/?code=Ly8gdGhpcyBpbGx1c3RyYXRlcyBKYXZhU2NyaXB0IGNvZGUgZXhlY3V0aW5nCi8vIHN5bmNocm9ub3VzbHksIHdpdGggZWFjaCBsaW5lIGdvaW5nIG9udG8gdGhlCi8vIENhbGwgU3RhY2sgYW5kIGV4ZWN1dGluZyBpbiB0dXJuCgpjb25zb2xlLmxvZygiVGhpcyBpcyB0aGUgZmlyc3QgbGluZSBvZiBjb2RlISIpOwpjb25zb2xlLmxvZygiVGhpcyBpcyB0aGUgc2Vjb25kIGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIHRoaXJkIGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIGZvcnRoIGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIGZpZnRoIGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIHNpeHRoIGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIHNldmVudGggbGluZSBvZiBjb2RlISIpOwpjb25zb2xlLmxvZygiVGhpcyBpcyB0aGUgZWlnaHQgbGluZSBvZiBjb2RlISIpOwpjb25zb2xlLmxvZygiVGhpcyBpcyB0aGUgbmludGggbGluZSBvZiBjb2RlISIpOwpjb25zb2xlLmxvZygiVGhpcyBpcyB0aGUgdGVudGggbGluZSBvZiBjb2RlISIpOwo%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">link illustrating how synchronous code is executed</a></p>
<p>Can you see how each line is executed one at a time? Experiment by adding in the functions code above (make sure you add a line of code which calls the <code>printSquare</code> function to kick it off!).</p>
<h3>What is a stack trace?</h3>
<p>The stack is very help to know about. When your code errors, you often get a 'stack trace' as part of the error message. Being able to read the 'stack trace' can help us follow the executing code, and that can lead us to our piece of code that is causing the error.</p>
<p>Try running the code below in your browser.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`can&#x27;t multiply <span class="hljs-subst">${a}</span> and <span class="hljs-subst">${b}</span>`</span>)
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">return</span> multiply(n, n)
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printSquare</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">const</span> result = square(n)
    <span class="hljs-built_in">console</span>.log(result)
}

printSquare(<span class="hljs-number">4</span>)
</code></pre>
<p>This is the error. Read the stack trace from the bottom up.<br>
<figure><img src="https://user-images.githubusercontent.com/4499581/93219628-78e02580-f763-11ea-9948-81d558dbf65d.png" alt="stack trace"><figcaption></figcaption></figure><br>
What do you think the numbers like (&lt;anonymous:5:12&gt;) refer to?</p>
<h3>Stack overflow</h3>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"></span>) </span>{
    hello()
}
hello()
</code></pre>
<p>This will break.<br>
<figure><img src="https://user-images.githubusercontent.com/4499581/93220411-65818a00-f764-11ea-9a64-b5a92881ecaa.png" alt="stack overflow error message"><figcaption></figcaption></figure><br>
Can you explain what is going on here? What other code might cause a max call stack size exceeded (stack overflow)?</p>
<h3>Providing asynchronous behaviour</h3>
<p>Now you are familiar with the Call Stack, imagine what the impact will be if a function takes a long time to execute or has to wait on something, this function will stop all the other code executing. So how can we avoid this?</p>
<p>In the Browser (for front-end JavaScript) and Node (for back-end JavaScript), JavaScript run inside a runtime 'container'. The runtime includes additional components which are not part of JavaScript. These include:</p>
<ul>
<li>the <code>Web APIs</code> (e.g. the DOM, Timers, Fetch API)</li>
<li>the <code>Callback Queue</code> - which holds callback functions from events which have just completed</li>
<li>the <code>Event Loop</code> - which monitors the Callback Queue and the Call Stack and places callbacks from the Callback Queue onto the Call Stack when it is empty. There is an event loop for every browser tab.</li>
</ul>
<p>The <code>Event Loop</code> is what allows asynchronous (non-blocking) operations to occur — despite the fact that JavaScript is single-threaded.</p>
<p>Asynchronous (async) functions such as setting times, reading files etc. are recognised by Node.js and are executed in a separate area from the Call Stack. Node polls (regularly checks) the computer for the completion of the async operation and, once the operation is complete, the callback is placed into the <code>Callback Queue</code>. The <code>Event Loop</code> waits for the Call Stack to be empty and then moves the pending callback onto the Call Stack. It wait as otherwise it would randomly interrupt the execution of whatever sequence of function calls were queued up on the stack.</p>
<p>Below is an example.</p>
<p><figure><img src="https://user-images.githubusercontent.com/4499581/93320644-3a04ab00-f809-11ea-9ab9-4770ec86b177.gif" alt="async call stack"><figcaption></figcaption></figure></p>
<h3>Timers</h3>
<p>JavaScript does not have a built in timer feature. It uses the Timer API provided by the Node.js runtime to perform time-related operations. For this reason, timer operations are asynchronous.</p>
<p><code>setTimeout(callback, millis)</code> can be used to schedule code execution after a designated amount of milliseconds. It accepts a callback function as its first argument and the millisecond delay as the second argument.</p>
<p>When <code>setTimeout</code> is called, the timer is started in <code>Web APIs</code> part of the Node/Browser runtime. This frees the Call Stack up to continue executing code and only when the timer is complete and the Call Stack empty, does the callback get pushed to the Call Stack for execution.</p>
<p>Click on <a href="http://latentflip.com/loupe/?code=Ci8vIHRoaXMgaWxsdXN0cmF0ZXMgSmF2YVNjcmlwdCBjb2RlIGV4ZWN1dGluZwovLyBhIHRpbWVyIGFzeW5jaHJvbm91c2x5Cgpjb25zb2xlLmxvZygiVGhpcyBpcyB0aGUgZmlyc3QgbGluZSBvZiBjb2RlISIpOwpjb25zb2xlLmxvZygiVGhpcyBpcyB0aGUgc2Vjb25kIGxpbmUgb2YgY29kZSEiKTsKCnNldFRpbWVvdXQoZnVuY3Rpb24gdGltZW91dCgpIHsKICAgIGNvbnNvbGUubG9nKCJUaW1lciB3YXMgY2FsbGVkISIpOwp9LCA1MDAwKTsKCmNvbnNvbGUubG9nKCJUaGlzIGlzIHRoZSB0aGlyZCBsaW5lIG9mIGNvZGUhIik7CmNvbnNvbGUubG9nKCJUaGlzIGlzIHRoZSBmb3J0aCBsaW5lIG9mIGNvZGUhIik7CmNvbnNvbGUubG9nKCJUaGlzIGlzIHRoZSBmaWZ0aCBsaW5lIG9mIGNvZGUhIik7CmNvbnNvbGUubG9nKCJUaGlzIGlzIHRoZSBzaXh0aCBsaW5lIG9mIGNvZGUhIik7CmNvbnNvbGUubG9nKCJUaGlzIGlzIHRoZSBzZXZlbnRoIGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIGVpZ2h0IGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIG5pbnRoIGxpbmUgb2YgY29kZSEiKTsKY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIHRlbnRoIGxpbmUgb2YgY29kZSEiKTsKCmNvbnNvbGUubG9nKCJXZWxjb21lIHRvIGxvdXBlLiIpOw%3D%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">this link which uses Loupe to illustrates async timers</a>.</p>
<p>Does the timer callback get executed at exactly 5 second after the timer is started? If not, why not?</p>
<h2>Assignment</h2>
<p>Make an animation or slide show that illustrates the event loop for the following piece of code. <code>app.post</code> is a route handler from an 'express' server it takes a string that is a path, and a route handler function. The route handler function is called when the server receives a POST request to the <code>/users</code> route. Start your stack with a call to the <code>createUser</code> function.</p>
<p>The route handlers in express are all on a timer, so if you don't call <code>response.render</code> or <code>response.send</code> within a time limit express will return a timeout error. Don't worry about this for now. Note that functions without a name are referred to as 'anonymous' functions.</p>
<p>Be ready to present your slides or animation back to the group.</p>
<pre><code class="language-javascript">app.post(<span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createUser</span>(<span class="hljs-params">request, response</span>) </span>{
    User.findOrCreate({ <span class="hljs-attr">where</span>: request.body })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">user</span>) </span>{
            user.getContacts()
                .then(<span class="hljs-function"><span class="hljs-params">contacts</span> =&gt;</span> {
                    request.session.userId = user.id
                    response.render(<span class="hljs-string">&#x27;profile&#x27;</span>, {user, contacts})
                })
        })
    logging(<span class="hljs-string">`/users route called with <span class="hljs-subst">${request.body}</span>`</span>)
})
</code></pre>
<h3>Assignment extension tasks</h3>
<p>TODO</p>
<h2>Additional resources</h2>
<ul>
<li>This <a href="https://youtu.be/8aGhZQkoFbQ">reference video</a> provides an excellent explanation of the interactions between the Call Stack, Event Loop and Callback Queue.</li>
<li><a href="https://youtu.be/8aGhZQkoFbQ">Understanding the Event Loop</a></li>
<li><a href="https://nodejs.org/en/docs/guides/timers-in-node/">Timers in Node.js</a></li>
</ul>

    <nav id="footer-nav"></nav>
    <script src="/curriculum/js/tabbed-code-blocks.js"></script>
    <script>
        function toggleNav() {
            const button = document.getElementById('navigation-toggle')
            const isAriaExp = button.getAttribute('aria-expanded')
            const newAriaExp = (isAriaExp == "false") ? "true" : "false"
            button.setAttribute('aria-expanded', newAriaExp)
            const nav = document.getElementById('navigation')
            nav.style.display = nav.offsetParent ? 'none' : 'block'
        }
        function footerNav() {
            const links = document.getElementsByClassName('nav-link')
            const hrefs = Array.from(links).map(a => a.getAttribute('href'))
            const [current] = window.location.href.match(/[0-9\.]+[a-zA-Z0-9_\\-]+\.html/) || [0]
            const index = hrefs.findIndex(href => {
                const page = href.split(/\\|\//).pop()
                return page === current
            })
            const prevIndex = index - 1
            const nextIndex = index + 1
            if (prevIndex > -1) {
                const prev = document.createElement('a') 
                prev.appendChild(document.createTextNode("◀︎ Prev"))
                prev.title = "Previous session notes"
                prev.href = hrefs[prevIndex]
                document.getElementById('footer-nav').prepend(prev)
            }
            if (nextIndex < hrefs.length) {
                const next = document.createElement('a') 
                next.appendChild(document.createTextNode("Next ►"))
                next.title = "Next session notes"
                next.href = hrefs[nextIndex]
                document.getElementById('footer-nav').append(next)
            }
            window.removeEventListener('DOMContentLoaded', footerNav)
        }
        window.addEventListener('DOMContentLoaded', footerNav)
    </script>
</body>

</html>
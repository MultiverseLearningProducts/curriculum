<!DOCTYPE html>
<html lang="en-GB">

<head>
    <meta charset="utf-8">
    <title>
         Containerisation
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="/curriculum/favicon.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/an-old-hope.min.css">
    <link rel="stylesheet" href="/curriculum/style.css" />
    <script src="/curriculum/js/highlight.min.js"></script>
    <script src="/curriculum/js/bash.min.js"></script>
    <script src="/curriculum/js/java.min.js"></script>
    <script src="/curriculum/js/javascript.min.js"></script>
    <script src="/curriculum/js/sql.min.js"></script>
</head>

<body>
    <button id="navigation-toggle" aria-expanded="false" aria-haspopup="true" onclick="toggleNav()"
        onkeydown="event => {event.keyCode === 13 ? toggleNav() : null}" tabindex="1">Table of contents</button>
    <nav id="navigation"><ul><details><summary>Bootcamp</summary><ul><details><summary>Unit 1 Object Oriented Programming</summary><ul><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.0-UML_Modelling.html">0.1.0 UML Modelling</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.1-JavaScript_Objects_And_Functions.html">0.1.1 JavaScript Objects And Functions</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.2-Test_Driven_Development.html">0.1.2 Test Driven Development</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.3-Objects_in_an_Airport_Domain.html">0.1.3 Objects in an Airport Domain</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.4-Static_functions_and_properties.html">0.1.4 Static functions and properties</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.5-Inheritance.html">0.1.5 Inheritance</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.7-OOP_Challenge.html">0.1.7 OOP Challenge</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-1-Object_Oriented_Programming/0.1.8-End_of_Unit_Quiz_OOP.html">0.1.8 End of Unit Quiz OOP</a></li></ul></details><details><summary>Unit 2 Asynchronous JavaScript</summary><ul><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.1-Asynchronous_JavaScript.html">0.2.1 Asynchronous JavaScript</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.2-Promises.html">0.2.2 Promises</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.3-Asynchronous_Airport_Data_Load.html">0.2.3 Asynchronous Airport Data Load</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-2-Asynchronous_JavaScript/0.2.4-End_of_Unit_Quiz_Async.html">0.2.4 End of Unit Quiz Async</a></li></ul></details><details><summary>Unit 3 Relational Databases</summary><ul><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.2-Introduction_to_Databases.html">0.3.2 Introduction to Databases</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.3-Basic_SQL_Commands.html">0.3.3 Basic SQL Commands</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.4-SQL_Joins.html">0.3.4 SQL Joins</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.5-Database_access_using_Node.html">0.3.5 Database access using Node</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.6-Populating_databases_from_JSON.html">0.3.6 Populating databases from JSON</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.7-Object_Relational_Mapping_part_1.html">0.3.7 Object Relational Mapping part 1</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.8-Object_Relational_Mapping_part_2.html">0.3.8 Object Relational Mapping part 2</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.9a-Sequelize_part_1.html">0.3.9a Sequelize part 1</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.9b-Sequelize_part_2.html">0.3.9b Sequelize part 2</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-3-Relational_Databases/0.3.9c-End_of_Unit_Quiz_Databases.html">0.3.9c End of Unit Quiz Databases</a></li></ul></details><details><summary>Unit 4 RESTful Servers</summary><ul><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.1-Web_Servers.html">0.4.1 Web Servers</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.2-Application_Servers.html">0.4.2 Application Servers</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.3-Postman.html">0.4.3 Postman</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.4-Route_Parameters.html">0.4.4 Route Parameters</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.5-CRUD_operations.html">0.4.5 CRUD operations</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.6-Server_side_Validation.html">0.4.6 Server side Validation</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-4-RESTful_Servers/0.4.7-End_of_Unit_Quiz_RESTful.html">0.4.7 End of Unit Quiz RESTful</a></li></ul></details><details><summary>Unit 5 Human Computer Interaction</summary><ul><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.1-Human_Computer_Interaction.html">0.5.1 Human Computer Interaction</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.2-Server_Side_Rendering.html">0.5.2 Server Side Rendering</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.3-The_Document_Object_Model.html">0.5.3 The Document Object Model</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.4-HTML_forms_and_lists.html">0.5.4 HTML forms and lists</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-5-Human_Computer_Interaction/0.5.5-End_of_Unit_Quiz_HCI.html">0.5.5 End of Unit Quiz HCI</a></li></ul></details><details><summary>Unit 6 End Of Bootcamp Group Project</summary><ul><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.1-Introduction.html">0.6.1 Introduction</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.2-Requirements.html">0.6.2 Requirements</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.3-Agile_Development.html">0.6.3 Agile Development</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.4-Design.html">0.6.4 Design</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.5-GitHub_Projects.html">0.6.5 GitHub Projects</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.6-Branching_and_Pull_Requests.html">0.6.6 Branching and Pull Requests</a></li><li><a class="nav-link" href="/curriculum/Bootcamp/Unit-6-End_Of_Bootcamp_Group_Project/0.6.7-Deployment_with_Heroku.html">0.6.7 Deployment with Heroku</a></li></ul></details></ul></details><details><summary>Module 1</summary><ul><details><summary>Unit 1 Agile user requirements</summary><ul><li><a class="nav-link" href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.1-Introduction_to_Agile.html">1.1.1 Introduction to Agile</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.2-Personas.html">1.1.2 Personas</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.3-User_Stories.html">1.1.3 User Stories</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.4-Requirements.html">1.1.4 Requirements</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-1-Agile_user_requirements/1.1.5-Next_Steps.html">1.1.5 Next Steps</a></li></ul></details><details><summary>Unit 2 Designing UI</summary><ul><li><a class="nav-link" href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.1-Usability_heuristics.html">1.2.1 Usability heuristics</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.2-Composition_and_components_in_design.html">1.2.2 Composition and components in design</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.3-Prototyping_UI.html">1.2.3 Prototyping UI</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-2-Designing_UI/1.2.4-Next_Steps.html">1.2.4 Next Steps</a></li></ul></details><details><summary>Unit 3 Building UI with React</summary><ul><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.1-Getting_started_with_React.html">1.3.1 Getting started with React</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.2-React_methods_and_computed_properties.html">1.3.2 React methods and computed properties</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.7-Integrating_Redux_for_global_state_management.html">1.3.7 Integrating Redux for global state management</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_React/1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 3 Building UI with Vue.js</summary><ul><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.0-Welcome_to_Unit_3.html">1.3.0 Welcome to Unit 3</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.1-Getting_started_with_the_Vue_CDN.html">1.3.1 Getting started with the Vue CDN</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.2-Vue_methods_and_computed_properties.html">1.3.2 Vue methods and computed properties</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.3-Events_and_adding_to_cart.html">1.3.3 Events and adding to cart</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.4-Introducing_routing_to_our_app.html">1.3.4 Introducing routing to our app</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.5-Fixing_the_add_to_cart_event.html">1.3.5 Fixing the add to cart event</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.6-Adding_the_product_details_page.html">1.3.6 Adding the product details page</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.7-Integrating_Vuex_for_global_state_management.html">1.3.7 Integrating Vuex for global state management</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.8-Consolidating_the_final_components.html">1.3.8 Consolidating the final components</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-3-Building_UI_with_Vue.js/1.3.9-Closing_thoughts_and_next_steps.html">1.3.9 Closing thoughts and next steps</a></li></ul></details><details><summary>Unit 4 Accessibility</summary><ul><li><a class="nav-link" href="/curriculum/Module-1/Unit-4-Accessibility/1.4.1-Inclusive_design.html">1.4.1 Inclusive design</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-4-Accessibility/1.4.2-Accessibility.html">1.4.2 Accessibility</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-4-Accessibility/1.4.3-Next_Steps.html">1.4.3 Next Steps</a></li></ul></details><details><summary>Unit 5 End to end testing</summary><ul><li><a class="nav-link" href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.1-End_to_end_testing.html">1.5.1 End to end testing</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.2-End_to_end_testing_with_Cypress.html">1.5.2 End to end testing with Cypress</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.3-Adding_more_test_coverage.html">1.5.3 Adding more test coverage</a></li><li><a class="nav-link" href="/curriculum/Module-1/Unit-5-End_to_end_testing/1.5.4-Test_cases_and_equivalence_testing.html">1.5.4 Test cases and equivalence testing</a></li></ul></details></ul></details><details><summary>Module 2</summary><ul><details><summary>Unit 1 Securing APIs with Basic Auth</summary><ul><li><a class="nav-link" href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.1-RESTful_APIs_and_Frameworks.html">2.1.1 RESTful APIs and Frameworks</a></li><li><a class="nav-link" href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.2-Password_Hashing.html">2.1.2 Password Hashing</a></li><li><a class="nav-link" href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.3-Implementing_Basic_Auth.html">2.1.3 Implementing Basic Auth</a></li><li><a class="nav-link" href="/curriculum/Module-2/Unit-1-Securing_APIs_with_Basic_Auth/2.1.4-Limitations_of_Basic_Auth.html">2.1.4 Limitations of Basic Auth</a></li></ul></details><details><summary>Unit 2 Securing APIs with OAuth and OpenID Connect</summary><ul><li><a class="nav-link" href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.1-Introduction_to_OAuth.html">2.2.1 Introduction to OAuth</a></li><li><a class="nav-link" href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.2-Securing_APIs_with_OAuth.html">2.2.2 Securing APIs with OAuth</a></li><li><a class="nav-link" href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.3-OpenID_Connect.html">2.2.3 OpenID Connect</a></li><li><a class="nav-link" href="/curriculum/Module-2/Unit-2-Securing_APIs_with_OAuth_and_OpenID_Connect/2.2.4-Module_2_assessment.html">2.2.4 Module 2 assessment</a></li></ul></details></ul></details><details><summary>Module 3</summary><ul><details><summary>Unit 1 The SDLC</summary><ul><li><a class="nav-link" href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.1-The_Software_Development_Life_Cycle.html">3.1.1 The Software Development Life Cycle</a></li><li><a class="nav-link" href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.2-The_roles_and_responsibilities_in_the_SDLC_with_communication.html">3.1.2 The roles and responsibilities in the SDLC with communication</a></li><li><a class="nav-link" href="/curriculum/Module-3/Unit-1-The-SDLC/3.1.3-Communication_in_your_teams.html">3.1.3 Communication in your teams</a></li></ul></details><details><summary>Unit 2 The 7 Princibles of Testing</summary><ul><li><a class="nav-link" href="/curriculum/Module-3/Unit-2-The-7-Princibles-of-Testing/3.2.1-The_7_Princibles_of_Testing.html">3.2.1 The 7 Princibles of Testing</a></li><li><a class="nav-link" href="/curriculum/Module-3/Unit-2-The-7-Princibles-of-Testing/3.2.2-Continuous_Deployment.html">3.2.2 Continuous Deployment</a></li></ul></details><details><summary>Unit 3 Deployment and Maintenance</summary><ul><li><a class="nav-link" href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.1-Introduction_to_Unix.html">3.3.1 Introduction to Unix</a></li><li><a class="nav-link" href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.2-Introduction_to_containerisation.html">3.3.2 Introduction to containerisation</a></li><li><a class="nav-link" href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.3-Introduction_to_Cloud_Computing.html">3.3.3 Introduction to Cloud Computing</a></li><li><a class="nav-link" href="/curriculum/Module-3/Unit-3-Deployment-and-Maintenance/3.3.4-Monitoring_and_Maintenance.html">3.3.4 Monitoring and Maintenance</a></li></ul></details></ul></details><details><summary>Module 4</summary><ul><details><summary>Unit 1 Open Web Application Security Project</summary><ul><li><a class="nav-link" href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.1-Introduction_to_the_OWASP_Top_Ten.html">4.1.1 Introduction to the OWASP Top Ten</a></li><li><a class="nav-link" href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.2-Injection_Attacks.html">4.1.2 Injection Attacks</a></li><li><a class="nav-link" href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.3-Broken_Authentication.html">4.1.3 Broken Authentication</a></li><li><a class="nav-link" href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.3-Exposing_Sensitive_Data.html">4.1.3 Exposing Sensitive Data</a></li><li><a class="nav-link" href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.4-Monitoring_for_attacks.html">4.1.4 Monitoring for attacks</a></li><li><a class="nav-link" href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.5-The_role_of_a_Penetration_Tester.html">4.1.5 The role of a Penetration Tester</a></li><li><a class="nav-link" href="/curriculum/Module-4/Unit-1-Open_Web_Application_Security_Project/4.1.6-Next_Steps.html">4.1.6 Next Steps</a></li></ul></details></ul></details></ul></nav>
    <h1>Containerisation</h1>
<p>The code we write is never destined solely for our laptops. We write software that will run on other machines. Docker gives us a way to package our app, and all its dependencies, into a 'shipping' container that will run on another machine.</p>
<h2>Running containers</h2>
<pre><code class="language-sh">docker run hello-world
</code></pre>
<p>Once docker is installed in your shell you will have the <code>docker</code> command that you can use to build and run containers.</p>
<h2>Building containers</h2>
<p>With a <code>Dockerfile</code> you can define your own container. You will usually start with a 'base-image' like the Alpine container we have looked at together. You can then declare a series of scripts or commands that will build out your container. We are going to dockerise an app. Use the example below for one of your own projects.</p>
<p><a href="https://github.com/bmordan/noughts-and-crosses/archive/refs/tags/1.1.0.zip">Download this ruby project</a></p>
<p><code>cd</code> into the project folder and create a plain text file called <code>Dockerfile</code> with no extension.</p>
<pre><code class="language-docker"><span class="hljs-keyword">FROM</span> ruby:<span class="hljs-number">2.6</span>.<span class="hljs-number">0</span>

<span class="hljs-keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y net-tools</span>
<span class="hljs-keyword">RUN</span><span class="bash"> mkdir /app</span>

<span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>

<span class="hljs-keyword">COPY</span><span class="bash"> Gemfile* .</span>
<span class="hljs-keyword">RUN</span><span class="bash"> bundle install</span>

<span class="hljs-keyword">COPY</span><span class="bash"> ./lib/ .</span>

<span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">4567</span>

<span class="hljs-keyword">CMD</span><span class="bash"> [<span class="hljs-string">&quot;ruby&quot;</span>, <span class="hljs-string">&quot;server.rb&quot;</span>]</span>
</code></pre>
<p>In this file we use a base image called <code>ruby:2.6.0</code>. We <code>RUN</code> a command that installs a Unix package called 'net-tools'. We then create a new folder called <code>/app</code> at the root of the container. We then 'move' ourselves into that <code>/app</code> folder. From here we <code>COPY</code> from the local file system the <code>lib</code> folder into the working directory inside the container which will become <code>/app/lib</code>. We then make expose the containers' <code>PORT</code> 4567 to the 'host' system. Finally the container has a command that it will run when the container is started, which for us is <code>ruby server.rb</code> this will start the ruby web program noughts and crosses.</p>
<h3>Ready to build your container?</h3>
<p><code>docker build -t noughts-and-crosses .</code></p>
<p>This command is invoking <code>docker</code> to <code>build</code> a container and <code>-t</code> tag it with the label <code>noughts-and-crosses</code> from the Dockerfile that can be located in the current folder <code>.</code> the period or dot means 'here' in the current operating system, your laptop, the 'host'.</p>
<h3>Ready to run your container?</h3>
<p><code>docker run noughts-and-crosses</code></p>
<p>Easy. Now if you visit <code>http://localhost:4567</code> you'll...<br>
... not see anything 🙁 yet in your shell you should see the ruby process is running. Noughts and crosses is running, however it is sealed within that container that you just built. We did expose the <code>PORT</code> 4567, what we need to do is map that port to the same port on our 'host' computer. Stop the container with control+c.</p>
<p><code>docker run -p 4567:4567 noughts-and-crosses</code></p>
<p>That should enable us to use that webapp at <code>http://localhost:4567</code>. Some other things to experiment with. At the moment when we start a container it takes over our shell. We can run containers in 'detached' mode with the <code>-d</code> flag, which means we can still use our shell.</p>
<p><code>docker run -d -p 4567:4567 noughts-and-crosses</code></p>
<p>If we wanted to see what containers are running we can list them all with the command</p>
<pre><code class="language-sh">docker ps
</code></pre>
<p>Can you see the CONTAINER ID? You can use that ID to address it. We can also interact and enter the running containers like we did with the Alpine image. You will have a unique ID so replace <code>1c784864b06e</code> with your container ID.</p>
<pre><code class="language-sh">docker <span class="hljs-built_in">exec</span> -it 1c784864b06e sh
</code></pre>
<p>Here we invoke <code>docker</code> to <code>exec</code> execute a command in an <code>-it</code> interactive session for container <code>1c784864b06e</code> and the command we want to execute is <code>sh</code> which will start a shell, and we'll be 'in' the container. Can you find out which flavour of Unix this base-image is built on (<em>hint</em> <code>uname -all</code>)?</p>
<h2>Compose containers</h2>
<p>You can run a container! Awesome. Now how about running 2, or 3 or 4 containers together. As this gets a bit unwieldy when you're just typing in shell commands, there is another tool called <code>docker-compose</code> that lets you define all the config for a set of containers in a file, then you can <code>docker-compose up</code> and start all the containers together.</p>
<p>This is great for example when you want to run a database, an API server and maybe a frontend project. We should start with just a pair of containers working together. You should have <code>docker-compose</code> installed along with docker for desktop.</p>
<p>Create a <code>docker-compose.yaml</code> file and lets define 2 containers.</p>
<pre><code class="language-yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3.9&quot;</span>
    
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.7</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">somewordpress</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">wordpress</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">wordpress</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">wordpress</span>
    
  <span class="hljs-attr">wordpress:</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">wordpress:latest</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8000:80&quot;</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">WORDPRESS_DB_HOST:</span> <span class="hljs-string">db:3306</span>
      <span class="hljs-attr">WORDPRESS_DB_USER:</span> <span class="hljs-string">wordpress</span>
      <span class="hljs-attr">WORDPRESS_DB_PASSWORD:</span> <span class="hljs-string">wordpress</span>
      <span class="hljs-attr">WORDPRESS_DB_NAME:</span> <span class="hljs-string">wordpress</span>
</code></pre>
<p>In the folder where you created the <code>docker-compose.yaml</code> run <code>docker-compose up</code>. Oh wow a locally running wordpress <code>http://localhost:8000</code> with zero effort, thank you very much that will do nicely. But before you go setting up your wordpress, there is one problem. As soon as the containers stop, the database, and all your wordpress config will disappear. To solve this problem docker will let us create 'volumes' that will persist data between the life cycle of containers coming up and going down. That way we can write data into our SQL database stop the containers, start them again, and retrieve our data. To create a couple of volumes we are going to add the following config to the 'services' object in our <code>docker-compose.yaml</code> file (<code>volumes:</code> should be at the root of the yaml, same level as version and services, so no spaces).</p>
<pre><code class="language-yaml"><span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">db_data:</span> {}
  <span class="hljs-attr">wordpress_data:</span> {}
</code></pre>
<p>Then update the <code>db:</code> service to mount this external volume.</p>
<pre><code class="language-yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-comment"># other properties like image, environment etc</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db_data:/var/lib/mysql</span>
  <span class="hljs-attr">wordpress:</span>
    <span class="hljs-comment"># other properties like image, ports, depends_on etc</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">wordpress_data:/var/www/html</span>
</code></pre>
<p>Now when we start data will be persisted between container restarts. You can see the volumes docker has created by running the command:</p>
<pre><code class="language-sh">docker volume ls
</code></pre>
<p>You can remove one of those volumes with <code>docker volume rm CONTAINER ID</code>. Whats really interesting is we can use this same method to 'mount' areas of our local file system into a container. So for example you can create a local folder named <code>themes</code> and download a wordpress theme. You can then mount that local folder into the container and use that theme in your wordpress.</p>
<pre><code class="language-yaml">  <span class="hljs-attr">wordpress:</span>
    <span class="hljs-comment"># other properties like image, ports, depends_on etc</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">wordpress_data:/var/www/html</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./themes:/var/www/html/wp-content/themes</span>
</code></pre>
<h2>Assignment</h2>
<ul>
<li>Can you Dockerise an app?</li>
<li>Create an account on docker</li>
<li>push your image to your docker hub (like git for docker images)</li>
</ul>
<p>If you tag your docker images with your <code>docker-username/container-label</code> and then push them you'll see you container online.</p>
<pre><code class="language-sh">docker push bmordan/some-container
</code></pre>

    <nav id="footer-nav"></nav>
    <script src="/curriculum/js/tabbed-code-blocks.js"></script>
    <script>
        function toggleNav() {
            const button = document.getElementById('navigation-toggle')
            const isAriaExp = button.getAttribute('aria-expanded')
            const newAriaExp = (isAriaExp == "false") ? "true" : "false"
            button.setAttribute('aria-expanded', newAriaExp)
            const nav = document.getElementById('navigation')
            nav.style.display = nav.offsetParent ? 'none' : 'block'
        }
        function footerNav() {
            const links = document.getElementsByClassName('nav-link')
            const hrefs = Array.from(links).map(a => a.getAttribute('href'))
            const [current] = window.location.href.match(/[0-9\.]+[a-zA-Z0-9_\\-]+\.html/)
            const index = hrefs.findIndex(href => {
                const page = href.split(/\\|\//).pop()
                return page === current
            })
            const prevIndex = index - 1
            const nextIndex = index + 1
            if (prevIndex > -1) {
                const prev = document.createElement('a') 
                prev.appendChild(document.createTextNode("◀︎ Prev"))
                prev.title = "Previous session notes"
                prev.href = hrefs[prevIndex]
                document.getElementById('footer-nav').prepend(prev)
            }
            if (nextIndex < hrefs.length) {
                const next = document.createElement('a') 
                next.appendChild(document.createTextNode("Next ►"))
                next.title = "Next session notes"
                next.href = hrefs[nextIndex]
                document.getElementById('footer-nav').append(next)
            }
            window.removeEventListener('DOMContentLoaded', footerNav)
        }
        window.addEventListener('DOMContentLoaded', footerNav)
    </script>
</body>

</html>